Core 2.1.8->2.1.9 (06/04/2011) 

r17654 | b_b        | 2011-04-06 20:24:17 +0200 (mer, 06 avr 2011) | report de r17653 : un auteur ne doit pas pouvoir lancer la procédure de reinstall sans accès ftp (merci arnault)

Extensions 2.1.9->2.1.10  (06/04/2011)

r46236 | real3t     | 2011-04-01 11:57:08 +0200 (ven, 01 avr 2011) | 1sSuite à remarques sur l'accessibilité du PortePlume qui bloque la navigation au clavier en changeant le comportement par défaut de la touche Tab, empêchant de ressortir du champ.À noter :* Tab : champ ou lien suivant* Maj-Tab : précédent* ctrl-tab et crtl-maj-tab : onglet suivant ou précédent- Alt-tab et alt-maj-tab : passer d'une application ouverte à une autreDonc, pour mettre la possibilité de saisir une tab dans le greffon de PP "Code", c'est assez mal parti.Remarque : que fait un fork de PP dans _galaxie_/forum.spip.org/forum.spip.org_2009/barre_outils/edition.php ?
r46374 | jluc       | 2011-04-05 17:23:24 +0200 (mar, 05 avr 2011) | Pas de backquotes autour des noms de tables avec l'API sql (sql_alter ici), sinon les préfixes de base ne sont pas mis à contribution et ya pas d'upgrade.Rq : ce plugin migre et utilise les forums breves articles etc en un unique formalisme objet / id_objet utilisable pour d'autres objets non spip aussi, et préfigure la future gestion des forums dans spip 2.3

Core 2.1.8->2.1.9 (25/03/2011) 

r16966 | ben      | 2011-01-14 14:40:30 +0100 (ven, 14 jan 2011) | SPIP 2.1.8
r16971 | cedric    | 2011-01-15 17:56:48 +0100 (sam, 15 jan 2011) | N'utiliser qu'un seul argument dans parse_url pour le support des PHP 4.x (ce bug touche les installation en mutualise)
r16978 | cedric    | 2011-01-18 10:07:05 +0100 (mar, 18 jan 2011) | mieux loger les echecs de connexion SQL en renseignant sur la nature de l'echec
r16991 | fil       | 2011-01-20 08:51:16 +0100 (jeu, 20 jan 2011) | supprimer la production d'un log de debug vraiment inutile
r17001 | booz      | 2011-01-20 17:33:55 +0100 (jeu, 20 jan 2011) | ne pas avoir en permanance le texte du message qu'on a posté précédemment sur l'article dans un nouveau message, comme prévu, même en ajax
r17002 | fil       | 2011-01-21 07:42:04 +0100 (ven, 21 jan 2011) | attention aux script=(exec)&arguments dans generer_form_ecrire (patv)
r17014 | kent1     | 2011-01-25 17:50:24 +0100 (mar, 25 jan 2011) | revenir sur r16960 pour ne pas avoir ecrire/ecrire/ dans les redirections dans le privé
r17015 | kent1     | 2011-01-25 18:06:14 +0100 (mar, 25 jan 2011) | Oups ... _DIR_RESTREINT_ABS se termine par / donc pas besoin de le rajouter manuellement
r17016 | kent1     | 2011-01-25 18:18:49 +0100 (mar, 25 jan 2011) | Oups ... _DIR_RESTREINT_ABS se termine par / donc pas besoin de le rajouter manuellement
r17017 | cedric    | 2011-01-26 11:54:04 +0100 (mer, 26 jan 2011) | Gros bug dans la gestion d'erreur sqlite :La fonction abstraite sql_error($serveur) ne prend qu'un argument en entree,mais introduit la derniere requete comme premier argument de la fonction spip_xxx_error($query, $serveur)spip_sqlite_error ne respectait pas cette signature, et utilisait $query comme $serveur, provoquant un log sybillin "aucune ressource sqlite" qui ne permettait pas de remonter a l'erreur d'origine
r17018 | cedric    | 2011-01-26 12:17:24 +0100 (mer, 26 jan 2011) | ne pas prendre en compte $row() dans la signature du formulaire_editer_auteur car elle recupere la saisie actuelle.Repare le bug de l'absence d'erreur au premier post (mot de passe trop court ou autre)
r17019 | cedric    | 2011-01-26 14:39:08 +0100 (mer, 26 jan 2011) | lorsque le file system fait la difference entre minuscules et majuscules, les pages de configuration des plugin ne sont pas trouvees si le prefix contient une majuscule.On traite a l'affichage, mais il faudrait faire remonter ce passage en minuscules a la lecture du plugin.xml meme
r17025 | cedric    | 2011-01-26 21:33:07 +0100 (mer, 26 jan 2011) | report de r16864 normaliser les retour chariots avant placer les span de changement de langue sur les multi (patv)
r17026 | cedric    | 2011-01-26 21:35:52 +0100 (mer, 26 jan 2011) | proteger les ' dans les valeurs injectees par form_hidden car certains navigateurs melangent guillemets simples et doubles
r17029 | kent1     | 2011-01-27 00:06:08 +0100 (jeu, 27 jan 2011) | Il y a des flux dont les items n'ont pas de date mais que des lastbuilddate...Comme on utilise celle-ci après avec un update ... on peut l'utiliser dès le départ si pas de date ...exemple de flux ... et non des moindre :http://core.spip.org/projects/spip/activity
r17030 | cedric    | 2011-01-28 13:33:40 +0100 (ven, 28 jan 2011) | en SQLite sql_delete ne respectait pas encore le changement d'API introduit par r14495 : renvoyer le nombre de lignes supprimees ou false en cas d'echec.En renvoyant toujours true en cas de succes, meme si aucune ligne n'etait supprimee, la fonction trompait la gestion de la file d'attente de job_queue entrainant double execution erronee de travaux
r17056 | esj       | 2011-02-01 09:39:54 +0100 (mar, 01 fév 2011) | Pour Mysql et Pg, comme pour Sqlite, vérifier que charger_php_extension retourne True, sinon un binaire PHP incapable de s'y interfacer produit une page blanche  sans aucun log.
r17058 | esj       | 2011-02-01 18:39:59 +0100 (mar, 01 fév 2011) | Validateur: quand la regexp des fichiers à analyser ne donne rien, ne pas faire croire qu'on a cherché les .html.
r17061 | cedric    | 2011-02-02 15:34:13 +0100 (mer, 02 fév 2011) | Report de r17060 qui repare les consequences de r16475 et r16476
r17065 | cedric    | 2011-02-02 16:31:05 +0100 (mer, 02 fév 2011) | r17061 ne suffisait encore pas puisque trace_query_end avait perdu un argument par la grace de r14414 jamais reporte en branche dev. Pour la peine l'argument revient, pour essayer de remettre d'aplomb tout cela
r17066 | cedric    | 2011-02-02 17:23:42 +0100 (mer, 02 fév 2011) | complement a r17061 et r17065 sur les erreurs en sqlite
r17067 | cedric    | 2011-02-02 17:24:52 +0100 (mer, 02 fév 2011) | depuis r15930 il y avait un meli melo dans le profileur, malgre la correction de r15934
r17068 | cedric    | 2011-02-02 17:26:24 +0100 (mer, 02 fév 2011) | il n'est pas necessaire d'echouer completement si le serveur ne fournit pas explain (ce peut etre un serveur annexe, cela n'enleve rien a la qualite des resultats renvoyes par le serveur principal)
r17069 | cedric    | 2011-02-02 17:28:19 +0100 (mer, 02 fév 2011) | eviter une reentrance infinie en cas d'erreur sql lors du profilage(erreur => message avec son aide => chargement de inc/charset => ecriture de la meta => erreur ...)
r17074 | esj       | 2011-02-03 13:26:16 +0100 (jeu, 03 fév 2011) | Validateur: mauvaise compilation de certaines DTD comportant des "?": les espaces qui pouvaient suivre n'étaient pas supprimés, la production de la RegExp sur les non terminaux de la grammaire était du coup fausse. De plus, on signale dans les logs les entités indéfinies (on pourrait carrément dire que c'est une erreur, mais dans les fait c'est mieux de pouvoir valider même si on n'a pas la traduction numérique de {{{&eacute}}} et consorts). A l'inverse, donner de quoi repérer une entité inutilisée, c'est souvent le signe d'une faute de frappe.
r17090 | esj       | 2011-02-04 17:24:20 +0100 (ven, 04 fév 2011) | Erreur auparavant transparente dans le validateur: il ne donnait pas accès aux  zones texte, ce qui n'a pas d'importance quand on l'utilise seulement pour son résultat booléen, mais ce ne sera pas toujours le cas. Et une scorie introduite par r17059.
r17092 | cedric    | 2011-02-04 21:29:12 +0100 (ven, 04 fév 2011) | recuperer l'id_xx de l'exec en cours, en enlevant _edit a la fin
r17105 | denisb    | 2011-02-07 08:19:12 +0100 (lun, 07 fév 2011) | on aligne l'affichage des image dans le TEXTE de la page rubrique sur celui de la page article.
r17155 | booz      | 2011-02-11 18:18:26 +0100 (ven, 11 fév 2011) | lignes_longues doit couper en tenant compte des &, # et ? car safari mobile ne coupe pas tout seul sur &, et les autres pas sur ? et #
r17156 | booz      | 2011-02-11 19:42:01 +0100 (ven, 11 fév 2011) | en fait non, il vaut mieux utilise word-wrap:break-word; en css, et pas du tout lignes_longues (cerdic)
r17187 | eric      | 2011-02-13 20:19:36 +0100 (dim, 13 fév 2011) | On ajoute les css des messages de réussite et d'erreur du privé. Ca donne un air de la future 2.3 et ça mange pas de pain.
r17242 | kent1     | 2011-02-17 03:40:33 +0100 (jeu, 17 fév 2011) | Pouvoir utiliser correctement le formulaire de création de site dans l'espace public en mutualisation avec la gestion des urls d'images courtesEn gros :- On envoit le lien d'origine et non le document récupéré dans le formulaire après auto suggestion;- On récupère le logo dans les feeds s'il y en a (fonction qui ne marchait que si on syndiquait un flux RSS);- On enlève les styles en dur du logo pour les mettre dans une feuille de style car trop spécifique à une utilisation dans le privé;Revert autorisé... bien entendu ...
r17272 | booz      | 2011-02-18 18:30:48 +0100 (ven, 18 fév 2011) | ne pas perdre son texte en cookie si on a cliqué sur prévisualiser le massage
r17289 | cedric    | 2011-02-22 11:26:06 +0100 (mar, 22 fév 2011) | dans l'API sql de SPIP sql_insert est suppose faire une insertion simple, et jamais de remplacement. En particulier, certaines fonctions de SPIP reposent sur l'echec de l'insertion en cas de doublon, ce qu'un remplacement ne permet plus de detecter (collision d'url existante par exemple). On enleve donc le OR REPLACE utilise dans sqlite pour sql_insert
r17291 | rastapopoulos      | 2011-02-24 23:43:04 +0100 (jeu, 24 fév 2011) | Ceci est un code mort car ce pipeline est en fait appelé génériquement par la fonction modifier_contenu() qui précède.
r17332 | b_b        | 2011-03-04 16:04:06 +0100 (ven, 04 mar 2011) | report de r17331 : passer l'action au pipeline post_edition tout comme dans pre_edition
r17346 | fil       | 2011-03-08 23:17:46 +0100 (mar, 08 mar 2011) | report de r17345: la fonction qui raccourcit le lien passe en charger_fonction(), de maniere a pouvoir integrer nativement le plugin lien_court
r17347 | kent1     | 2011-03-09 13:46:49 +0100 (mer, 09 mar 2011) | Un patch qui trainait depuis un bail sur mon disque pour que _DIR_PLUGIN_SUPP fonctionne correctement ... Testé par Renato également
r17348 | cedric    | 2011-03-09 15:00:28 +0100 (mer, 09 mar 2011) | eviter une erreur SQL lorsque la table des auteurs est vide (c'est anecdotique, mais evite de polluer les logs apres une restauration echouee)
r17350 | cedric    | 2011-03-09 21:21:04 +0100 (mer, 09 mar 2011) | report de r16189 et r16191 pour la creation d'une table sqlite a partir d'un show table qui vient de mysql
r17351 | cedric    | 2011-03-09 23:09:07 +0100 (mer, 09 mar 2011) | utiliser _nano_sha256 pour le calcul du hash256 afin d'eviter de tomber sur la fonction sha256 nativement ajoutee par le patsh sushosin, mais qui ne calcule pas le hash de la meme façon dans la decomposition des chaines en octets
r17354 | cedric    | 2011-03-09 23:46:03 +0100 (mer, 09 mar 2011) | complement a r17351 : il restait des occurences de sha256 potentiellement problematiques. On remplace par _nano_sha256
r17356 | cedric    | 2011-03-10 09:00:27 +0100 (jeu, 10 mar 2011) | revert de 3 modifications qui n'avaient rien a faire dans r17354 (aka oups)
r17357 | cedric    | 2011-03-10 11:41:43 +0100 (jeu, 10 mar 2011) | sqlite n'admet pas un type de champ "int(10) unsigned" mais "int unsigned"corriger a la volee
r17358 | cedric    | 2011-03-10 19:29:13 +0100 (jeu, 10 mar 2011) | gerer le cas d'un sql_alter('table spip_auteurs add openid text not null after xxx')qui comporte 2 pièges : le after surnumeraire et l'absence de "default ''", le premier ne devant pas empecher la correction du second.(cas d'une description de table venant de mysql et reinjectee dans sqlite via la fonction de maj de table)
r17360 | fil       | 2011-03-11 13:47:46 +0100 (ven, 11 mar 2011) | ajout du kurde Horami
r17361 | fil       | 2011-03-11 13:56:42 +0100 (ven, 11 mar 2011) | ecrit dans la langue
r17383 | marcimat  | 2011-03-13 11:21:32 +0100 (dim, 13 mar 2011) | Éviter de planter les fonctions de correction de caractère lorsqu'on leur donne un tableau au lieu d'une chaine.
r17384 | marcimat  | 2011-03-13 11:24:27 +0100 (dim, 13 mar 2011) | Placer le code après les déclarations statiques plutot.
r17431 | marcimat  | 2011-03-16 18:36:32 +0100 (mer, 16 mar 2011) | mysql doit échaper le nom de la table aussi lors des suppressions de tables.
r17441 | esj       | 2011-03-18 17:03:59 +0100 (ven, 18 mar 2011) | Dans un fichier XML, il peut y avoir plusieurs commentaires ou PI  en début de fichier, avant de tomber sur le Doctype ou la première vraie balise.
r17448 | esj       | 2011-03-18 23:26:38 +0100 (ven, 18 mar 2011) | Report de r17447. Un oubli d'actualisation qui empêchait la validation XML de se faire  sur les extraits XHTML produits par ajax_retour.
r17454 | esj       | 2011-03-20 14:21:56 +0100 (dim, 20 mar 2011) | Quand le validateur se rappelle avec une query-string qu'il a devinée, il faut ignore celle-ci quand on calcule le nom du script. Pour bien faire il faudrait être capable d'en faire profiter le validateur.
r17476 | cedric    | 2011-03-23 10:03:55 +0100 (mer, 23 mar 2011) | report de r17474 : pas de bug si le plugin est dans un sous dossier plugins/ de plugins/+ une protection en cas de double inclusion malencontreuse du fichier options des plugins
r17492 | fil       | 2011-03-24 22:23:38 +0100 (jeu, 24 mar 2011) | correctif XSS suite a r4837 (remerciements pour Arnault)


Extensions 2.1.8->2.1.9 (25/03/2011)

r44010 | potter | 2011-01-30 20:04:07 +0100 (dim, 30 jan 2011) | Pouvoir définir une option padding_vertical et padding_horizontal. C'est bien plus pratique parce que souvent les polices ne dépassent de la boite que en vertical, donc l'intérêt aussi de l'élargir sur l'horizontal est pas terrible...Ce qui manque serait de pouvoir définir vraiment un padding top right bottom left.Une petite astuce pour ceux qui voudraient ne garder qu'un padding en bas à présent (et donc mettre limage typo *aux bords* même avec une police qui dépasse : {{#SET{padding,15}#SET{hauteur_tout,#NOM_SITE_SPIP|image_typo{police=LEVIBRUSH.TTF, taille=#GET{taille}, couleur=#GET{couleur_tout}#GET{couleur_tout}, padding_vertical=#GET{padding}}|extraire_attribut{src}|hauteur}#SET{new_hauteur, #GET{hauteur_tout}|moins{#GET{padding}}}#SET{largeur_tout,#NOM_SITE_SPIP|image_typo{police=LEVIBRUSH.TTF, taille=#GET{taille}, couleur=#GET{couleur_tout}, padding_vertical=#GET{padding}}|extraire_attribut{src}|largeur}[(#NOM_SITE_SPIP|image_typo{police=LEVIBRUSH.TTF, taille=#GET{taille}, couleur=#GET{couleur_tout}, padding_vertical=#GET{padding}}|extraire_attribut{src}|image_recadre{#GET{largeur_tout},#GET{new_hauteur},bottom})]}}C'est sûr que c'est lourd, mais avec le cache de SPIP, ça fonctionne plutôt bien.Et ça ne casse en rien les existants padding : ils resteront comme avant.


Core 2.1.7->2.1.8 (14/01/2011) 

r16959 | cedric    | 2011-01-13 18:39:26 +0100 (jeu, 13 jan 2011) | la balise formulaire_admin est sur toutes les pages,ne pas provoquer l'inclusion de abstract_sql pour autant, si le visiteur est anonyme,cela laisse a penser qu'on a une connexion sql a chaque hit.On retarde l'inclusion au cas ou le visiteur aura acces aux boutons d'admin
r16960 | cedric    | 2011-01-13 23:04:34 +0100 (jeu, 13 jan 2011) | lorsque la redirection sur une action est absolue, il s'agit le plus souvent de l'adresse du site lui meme : transformer en url relative plutot que tout vider (cas de l'auth openid)
r16961 | cedric    | 2011-01-13 23:26:31 +0100 (jeu, 13 jan 2011) | Redirection en cas d'echec sur authentification : il faut utiliser & et non &amp; sur l'url
r16962 | cedric    | 2011-01-14 09:39:52 +0100 (ven, 14 jan 2011) | inclusion manquante (bmr)
r16963 | cedric    | 2011-01-14 09:49:45 +0100 (ven, 14 jan 2011) | parse_url n'accepte un deuxieme argument qu'a partir de PHP 5.1, corriger la syntaxe pour utiliser la version avec un seul argument.

Extensions 2.1.7->2.1.8 (14/01/2011)

r43547 | cedric    | 2011-01-13 19:11:18 +0100 (jeu, 13 jan 2011) | declarer les pipelines dans plugin.xml plutot que dans un fichier options charge a chaque hit

Core 2.1.6 -> 2.1.7 ( 13/01/2011) 
r16893 | fil       | 2011-01-05 09:50:20 +0100 (mer, 05 jan 2011) | eviter un Warning: Division by zero in ecrire/inc/invalideur.php on line 156
r16897 | cedric    | 2011-01-06 09:13:31 +0100 (jeu, 06 jan 2011) | report de r16734 : Evacuer les eventuelles clauses group vide au calcul des requetes dans un squelette.Permet a un critere d'injecter une clause group dynamique, evaluee au calcul, qui rendra '' si pas de group a faire.
r16898 | esj       | 2011-01-06 10:58:42 +0100 (jeu, 06 jan 2011) | Retour sur r16857: l'erreur du showtable provenait en fait d'une mauvaise citation de l'argument, et la correction empêchait l'accès aux vues. Nouveau correctif plus adapté, et découpe de la fonction principale du débusqueur en 2 pour pouvoir le surcharger plus facilement sans perdre le libellé des erreurs c'est indispensable (la preuve).
r16904 | cedric    | 2011-01-06 12:22:01 +0100 (jeu, 06 jan 2011) | Securite : redirections absolues depuis les actions (Matsuyama)introduire une fonction tester_url_absolue() qui teste si une url est absolue.L'utiliser dans le formulaire login et dans la securisation du parametre redirect de toutes les actions via public/aiguillerainsi que pour le parametre url de l'action cookie (pourquoi n'utilise-t-on pas le meme nom de variable ici ?)parse_url ne fonctionne pas sur les urls relatives, dans le formulaire de login. On corrige donc.
r16905 | cedric    | 2011-01-06 12:25:56 +0100 (jeu, 06 jan 2011) | securite : cast sur $exec (Matsuyama)
r16906 | cedric    | 2011-01-06 12:28:54 +0100 (jeu, 06 jan 2011) | securite : cast string sur la variable page de l'url (Matsuyama)
r16914 | esj       | 2011-01-07 23:28:33 +0100 (ven, 07 jan 2011) | Depuis que r14606 a enlevé, à juste titre, le LIKE dans le SHOW TABLE, la création d'un nouveau site ou la mise en route d'un plugin avec tables SQL provoque systématiquement des erreurs SQL inutilement alarmantes. De plus, la variable statique ignorait la valeur de l'argument $serveur, pas vraiment utile pour le moment mais qui en cas d'erreur opacifiait ce qui se passait. On remet tout ça au carré.
r16919 | fil       | 2011-01-08 13:13:39 +0100 (sam, 08 jan 2011) | pas de boucle infinie sur un csv vide
r16932 | fil       | 2011-01-09 17:53:49 +0100 (dim, 09 jan 2011) | refermer les balises mal fermees par le diff
r16942 | ben      | 2011-01-11 17:32:26 +0100 (mar, 11 jan 2011) | Visiblement c'est une fonction et pas un objet / sqlite_open 
r16943 | cedric    | 2011-01-11 21:23:04 +0100 (mar, 11 jan 2011) | Suite a r16898, corriger l'echappement de $match pour postgre et remplacer le like par un regexp dans sqlite car ESCAPE n'est pas supporte dans les versions 2 de sqlite
r16946 | cedric    | 2011-01-12 15:46:31 +0100 (mer, 12 jan 2011) | ne pas convertir en url absolue les url des directives filter progid:DXImageTransform.Microsoft.AlphaImageLoader(src=...,..) (nhoizey)
r16947 | cedric    | 2011-01-12 17:32:56 +0100 (mer, 12 jan 2011) | Les plugins se desactivent dans le public si on a la mauvaise idee de mettre un sous dossier plugins/ dans le dossier plugins/
r16948 | cedric    | 2011-01-13 11:27:07 +0100 (jeu, 13 jan 2011) | eviter de perdre son temps a chercher des fonds improbables
r16949 | cedric    | 2011-01-13 11:28:23 +0100 (jeu, 13 jan 2011) | texte_script doit toujours etre utilise quand on utilise un #ENV dans du php dans un squelette, il n'y a pas d'exception qui tienne
r16953 | esj       | 2011-01-13 12:43:55 +0100 (jeu, 13 jan 2011) | En mode debug, neutraliser le Content-Disposition sinon on ne voit presque rien.
r16955 | esj       | 2011-01-13 13:18:54 +0100 (jeu, 13 jan 2011) | Sécuriser l'appel des sous-squelettes privés (A. Pachot).

Extensions 2.1.6 -> 2.1.7 ( 13/01/2011) 
r43375 | cedric    | 2011-01-07 16:20:18 +0100 (ven, 07 jan 2011) | la suppression des declarations vide n'etait pas assez prudente et entrainant quelques troncature de selecteur mal a propos ! (Nicolas Hoizey)

Core 2.1.5 -> 2.1.6 ( 02/01/2011) 
r16805 | esj       | Eviter une erreur SQL dans les URL propres, quand on indique une table dont on n'a pas prÃ©cisÃ© dans la globale {{{table_titre}}} le champ indiquant le titre de l'objet.
r16807 | rasta     | CohÃ©rence entre URLs arbo et propre : le champ utilisÃ© comme titre pour les objets Ã©ditoriaux est par dÃ©faut le champ nommÃ© "titre" dans la base si rien n'est dÃ©clarÃ©.
r16809 | esj       | AmÃ©lioration de r16807: gÃ©rer le champ titre par dÃ©faut au niveau de trouver_table, afind'Ã©viter toute erreur SQL, en particulier celle potentielle dans les URL arbos.
r16849 | esj       | Pas d'annÃ©e 0000 en Postgres. RÃ©soud #1987.
r16857 | esj       | Sql_showtable provoquait une erreur SQL en cas de table inconnue ou sans droits de Select, ce n'est pas gÃ©rable. Mysql n'offrant pas un "IF EXISTS", on fait un appel Ã  "showtables like" auparavant, lequel ne renvoie rien sans rÃ¢ler si pas de droit de Select, ou pas de rÃ©ponse au Match.
r16862 | cedric    | report de r16852
r16870 | esj       | Enfin compris pourquoi certaines erreurs de compilation bloquaient parfois le signalement d'autres erreurs. Par ailleurs, r14404 a supprimÃ© la fonction affiche_erreurs_page et son appel conditionnÃ© Ã  la fin de index.php. Je ne sais pas pourquoi il a Ã©tÃ© rÃ©tabli ensuite, mais c'est du code mort.
r16872 | esj       | DÃ©cidÃ©ment, r16788 s'Ã©tait bien pris les pieds dans le tapis, pas seulement le copyrightcomme l'annonÃ§ait r16775. Voici enfin le bon correctif du cas pathologique.
r16874 | esj       | Ne pas proposer de restreindre Ã  une certaine rubrique quand aucune n'est crÃ©Ã©e. Et validation XHTML.
r16876 | eric      | Correction de l'info_maj de SPIP qui renvoie maintenant uniquement la version SPIP disponible la plus Ã©levÃ©e.
r16879 | fil       | divers bugs de secu permettant a un redacteur de faire du grabuge (securitoile)
r16880 | fil       | xss sur une page non trouvee (securitoile, realet)
r16884 | cedric    | bloquer les redirection absolues dans le formulaire de login, en prÃ©voyant une constante pour les webmestres qui veulent dÃ©sactiver cela pour des raisons qui leur appartiennent (ce qui permet de sÃ©curiser en assurant tout de mÃªme une continuitÃ© de fonctionnement pour ceux qui utilisaient malheureusement cette fonctionnalitÃ©). 

Core 2.1.4 -> 2.1.5 ( 21/12/2010) 
r16784 | esj       | report de r16783. Triple bug en r15088 : la table SQL 'forums' n'existe pas, le nom de la variable n'Ã©tait pas le mÃªme que dans son utilisation plus loin, et son sens n'Ã©tait plus le mÃªme.

Core 2.1.3 -> 2.1.4 ( 21/12/2010) 
r16745 | cedric    | Quand un article est une redirection reposant sur un raccourci de SPIPil faut generer une url absolue car celle-ci peut etre utilisee depuis une pageavec une profondeur >1 en cas d'url arborescentes.+ la fonction chapo_redirige a manifestement change de signature depuis longtemps et ne renvoie plus qu'une chaine, mais sa documentation aussi bien que la fonction tester_redirection ne le savaient pas : mise a jour de la doc et correction de la fonction de redirection pour renvoyer l'url complete dans le corps du 302 au lieu du premier caractere...
r16762 | cedric    | La verification de conformite du champ en base par rapport a ce qui a ete envoyee echouait aussi si on envoit une valeur vide sur un champ date, car SQL le cast en '0000-00-00'.Plus generalement, cette verification risque d'echouer sur tout type de champ caste (int, double, float, date, time, year, enum...) et on l'ignore dans ce cas
r16763 | cedric    | $limit indefinie et liberer la resource dans spip_sqlite_count
r16764 | esj       | modification du copyright.Je profite de cette Ã©criture massive pour normaliser quelque chose de trompeur lorsqu'on compare deux versions, savoir l'usage de " ou ' dans le premier argument de define et defined. Comme les chaÃ®nes entre apostrophes sont plus rapidement analysÃ©es que celles entre guillemets, je choisis l'apostrophe
r16768 | esj       | Depuis r11919 (gÃ©nÃ©ricitÃ© des tables de mots associÃ©s), le cas pathologique de la crÃ©ation d'un mot sans qu'aucun groupe de mot ne soit crÃ©Ã© au prÃ©alable n'Ã©tait pas blindÃ© contre un nom de table vide: Ã§a bouclait.
r16775 | esj       | r16768 s'est pris les pieds dans tapis avec le copyright.
r16776 | esj       | r16373 a eu raison de rÃ©parer le bug de conception dans generer_url_public dans le cas relatif depuis l'espace, mais du coup le lien dans le contrÃ´le des forums qui contournait Ã§a ne marchait plus.
r16778 | esj       | Liens de traduction sous la forme [{en}->art2] ou [{}->art2]: ignorer les articles refusÃ©s (Paolo).


Core 2.1.2 -> 2.1.3 ( 14/12/2010 ) 
r16030 | fil       | une date fixe dans le futur pour beneficier du query cache sql + commentaire
r16032 | cedric    | Le refactoring de [15970] avait rendu impossible le telechargement de lib qui etaient confondues avec des plugins...En effet plugins_get_infos() renvoyait toujours un tableau, meme si le fichier plugin.xml n'existe pas.Du coup on modifie ce cas qui n'est pas utilise autre part en renvoyant false.
r16035 | fil       | rtrim() pour faire le job
r16039 | fil       | bug dans la modification de date d'un document, generant de faux messages d'erreur lors de l'edition du titre lorsque l'option 'modifier la date des documents' est active (Robert caron, denisb) http://permalink.gmane.org/gmane.comp.web.spip.user/160536 http://permalink.gmane.org/gmane.comp.web.spip.user/160592
r16043 | bb        | on insÃ¨re jquery.cookie dans toutes les pages (par dÃ©faut dans jquery_plugins)
r16048 | fil       | affichage des stats : suite et consequences de [15986] (realet)
r16079 | fil       | {{{ _SERVER['REQUEST_TIME'] }}} n'est pas dispo avant PHP 5.1
r16110 | denisb    | depuis [15987] test_sql_mode_mysql() s'est dÃ©placÃ©e dans ecrire/req/mysql.php ce qui bloquait toute install non mysql (http://permalink.gmane.org/gmane.comp.web.spip.devel/58749).
r16112 | cedric    | suite a [15925] un post '' sur un champ intval stocke 0 provoque une alerte (incomprehensible) de conflit d'edition.Deseveriser le test en n'alertant pas lorsque la valeur en base est is_numeric et que la comparaison des intval est identique, mais c'est un pis-allerJe pense qu'il faudrait enlever ca de cette branche et le reprendre plus proprement, en tenant compte du type du champ pour faire la comparaison.Sinon, on oblige tous les formulaires a caster le post pour qu'il soit identique au format en base, ce qui est contraignant.
r16117 | esj       | Depuis le [14633], l'identification par LDAP d'un nouvel utilisateur ne fonctionnait plus! Ce serait bien d'Ã©viter les logs trompeurs.
r16118 | esj       | La protection des documents par Htacces a Ã©tÃ© bousillÃ©e par [13957]. Retour au code prÃ©cÃ©dent.
r16119 | esj       | Deux bugs :     * lorsque l'argument d'un INCLURE ne comportait pas de "=" mais Ã©tait suivi d'espace ou de Return, ceux-ci n'Ã©taient pas retirÃ©s et se retrouvaient dans les index du tableau {{{$contexte}}}     * le remplacement de {{{#LOGO_X|fichier}}} par {{{#LOGO_X**}}} etc ne marchait pas en PHP5.
r16120 | esj       | Les noms des paramÃ¨tres d'une chaÃ®ne de langue Ã©tendue n'Ã©taient pas entourÃ©s d'apostrophes dans le tableau argument de la fonction _T produit par le compilateur. Et eux non plus n'Ã©taient pas expurgÃ©s de leurs espaces, ce bug Ã©tant neutralisÃ© par le premier. Tant qu'Ã  intervenir sur la fonction traitant les chaÃ®nes de langues, je rÃ©introduis la constante MODULES_IDIOMES aveuglÃ©ment virÃ© par [16006].
r16121 | esj       | Les modes d'appels SQL ne concernent que MySQL, retour sur [15987] (DÃ©solÃ© pour [16110] Denis, j'avais prÃ©parÃ© Ã§a avant ton envoi, et cette maniÃ¨re prÃ©pare le portage Ã©ventuel pour les autres serveurs SQL). En prime, dÃ©couper en 2 l'Ã©tape 5 d'installation de LDAP pour pouvoir insÃ©rer facilement une Ã©tape supplÃ©mentaire (multi-serveurs LDAP etc).
r16131 | cedric    | un oeuf de paque malvenu dans [16119]. Gardons le au chaud pour quand ce sera la bonne saison, mais en attendant, point de var_dump dans la branche stable.
r16132 | cedric    | il semble qu'on arrive pas a charger certaines lib, la faute au Content-Type ?On se rabat sur l'extension quand elle est explicite.
r16138 | esj       | L'interdiction de dÃ©clarer une base externe Ã  qui n'est pas admin introduite Ã  raison par [14347] a Ã©tÃ© faite trop Ã  l'arrachÃ©e: comme {{{exec=install}}} dispense d'authentifier, l'utilisation de {{{autoriser('configurer')}}} ici ne repose plus que sur le cookie, qui n'est pas forcÃ©ment prÃ©sent, d'oÃ¹ un refus excessif. Il faut authentifier, mÃªme tardivement, afin que les autorisations soient calculables.Par ailleurs, en cas de fichier de connexion corrompu, SPIP refuse de se rÃ©installer tout en disant qu'il ne peut pas marcher. Il faut donc d'une part vÃ©rifier que ce fichier contient ce qu'il faut avant de prÃ©tendre que SPIP est installÃ©, et corriger l'option {{{tantpis}}} dans la crÃ©ation du fichier de session, option qui ne marchait pas en cas de serveur SQL inaccessible.
r16140 | bb        | ceci *est* un var_dump :p
r16141 | esj       | Comme pour la rÃ©Ã©criture [14175] des balises LOGO revue en [16119], la rÃ©Ã©criture de la balise EMBED_DOCUMENT dÃ¨s l'analyse syntaxique (cf [14177]) ne marchait pas en PHP5.
r16159 | esj       | Fichier d'installation corrompu, complÃ©ment Ã  [16138]: traitement du cas aux Ã©tapes ultÃ©rieures.
r16165 | esj       | Option {{{tantpis}} du fichier de session sans cookie en retard (retour sur [16139].
r16168 | esj       | Oups, confusion dans les comportements fetsel/getfetsel dans [16166].
r16171 | esj       | Mais non, lÃ  on est revenu Ã  la case dÃ©part. La confusion c'Ã©tait entre {{{true}}}Â et {{{continue}}} de l'argument {{{option}}} de {{{sql_getfetsel}}}. Ce coup-ci on a bien Ã  la fois le logout correct, le login automatique Ã  l'install, et l'install forcÃ©e en cas de fichier corrompu.
r16202 | marcimat  | Un trim en plus sur le nom des champs car certains outils pour SQLite utilisent des guillemets doubles lorsqu'ils modifient la structure des tables... (sqlite manager, par exemple).
r16205 | marcimat  | MÃªme chose que [16202] sur la primary key...
r16206 | marcimat  | sql_showbase avait une coquille sous SQLite dans la requÃªte d'extraction de la liste des tables de la base de donnÃ©e.
r16212 | fil       | un lien pour aller du forum admin au forum interne et vice-versa, cf http://www.spip-contrib.net/Le-plugin-Autorite#forum434569
r16217 | esj       | L'implÃ©mentation de la fonction {{{sql_showbase}}} ne correspond pas Ã  la spÃ©cification [10371] qui l'a introduite: si dans une base on utilise deux prÃ©fixes de tables dont l'un est une apocope de l'autre, cette fonction va renvoyer les deux jeux de tables quand on demande le premier jeu. Ca fait particuliÃ¨rement mal dans l'action de destruction des tables d'un site sur un installation mutualisÃ©e.
r16219 | esj       | Ca, par exemple: la fonction d'analyse de fichier de connexion ne reconnaisait pas un fichier en version 0.4
r16329 | fil       | retour sur http://core.spip.org/trac/spip/changeset/15905 ligne 531 qui bug l'affichage dans l'espace prive fr d'un article en, en ne lui donnant pas la bonne typo (le bug etait aussi dans textwheel, mais pas dans spip trunk)
r16348 | esj       | Warning indiquant en fait une Ã©criture inutile dans l'aide en ligne (Hoizey). Et Ã©liminer un log qui n'est pas forcÃ©ment alarmant.
r16350 | esj       | Uniformiser les cas d'erreur dans le validateur pour Ã©viter un warning.
r16353 | cedric    | traiter les insertions vide au mieux en indiquant un champ qui a un default dans la requete d'insertion pour que sqlite ne couine pas.Necessite au moins un champ avec default dans la table
r16354 | cedric    | traiter les insertions vide avec une clause DEFAULT VALUES, c'est encore mieux.
r16355 | cedric    | CEIL et FLOOR sont absente de sqlite2 mais utilisee par le calcul du rendu des statistiques
r16356 | esj       | Ne pas Ã©crire en dur l'extension des squelettes, elle pourra changer un jour.
r16365 | esj       | Passage en minuscule des noms de serveurs: [14467]Â Ã©tait effectivement sale et brutal, puisque URL_PAGE ne fonctionnait plus du tout sur un connect avec une majuscule, et il doit y avoir d'autres problÃ¨mes car l'oubli Ã©tait chronique dans le code, on rÃ©percute. Ce dÃ©pÃ´t corrige Ã©galement l'autre bug sur URL_PAGE signalÃ© dans [16360]Â et avant.
r16369 | esj       | Scorie dans [16365] (CÃ©dric).
r16373 | davux     | Correction de generer_url_public() en relatif dans le priveReport de [16362]: Utiliser _DIR_RACINE pour redescendre d'un niveau quandon appelle generer_url_public() depuis l'espace privÃ© avec $rel=true.
r16376 | cedric    | des lignes en trop a la fin de ce php qui provoque une sortie indesiree
r16379 | cedric    | dans sqlite, certaines erreurs SQL produisent des erreurs/warnings PHP qu'il faut catcher pour pouvoir loger. On utilise error_get_last() de PHP
r16380 | cedric    | 1sDeux bugs de la couche sqlite autour des md5 des referers :- la notation 0xF1 n'est pas connue de sqlite- la notation x'F1' est connue de sqlite3 mais ne semble pas utilisable pour caster une representation hexa d'un INT en INTOn est donc force de traiter les representation 0xF1 dans PHP par un appel a hexdec dans les fonctions quote et citePar ailleurs, a la creation de table tous les bigint sont converti en int pour beneficier de l'autoincrement, mais cela n'a d'interer qu'enpresence d'un autoincrement. On passe donc le flag a la fonction concernee lors de la creation de table, ce qui permet de preserverun type bigint sur les referer_md5 et d'accepter les entiers obtenus par hexdec() sur les md5 des referers.Je crois que ce patch laisserait passer un alter en bigint via sql_alter sur un champ autoincrement, ce qui n'est pas parfait. A completer peut etre, bien que ce cas soit tres hypothetique.
r16395 | cedric    | _sqlite_func_unix_timestamp ne fonctionnait que si heure:minute:seconde etaient bien present dans la date.On debug la regexp, mais, encore plus simple, on la remplace par strtotime qui fait le job aussi bien.
r16408 | cedric    | ne pas auto-associer les documents aux forums et aux signatures de petition
r16418 | cedric    | ne pas provoquer des inclusions lorsque la balise #URL_ECRIRE est dans un squelette, report adapte de [16413]
r16424 | cedric    | il n'est evidemment pas necessaire de decoder le contexte ajax et de faire plein de verification si le form poste n'a pas le meme nom que le form que l'on affiche, pour savoir si celui-ci vient d'etre poste...
r16454 | cedric    | peut etre que mysql ressortait par chance les stats dans le bon ordre, mais pour sqlite il faut explicitement un order by sur la date pour que ca soit trie...
r16466 | fil       | url_absolue doit nettoyer les // dans les urls, mais PAS dans la query apres le '?' (toutati)
r16473 | cedric    | traiter les array() en premier, car la fonction strncmp utilisee pour traiter les int provoque un warning sinon
r16474 | cedric    | SQLite fait une division entiere sur le timestamp, il en resulte une date arrondie au jour precedent, malgre le ceil qui suit.On reformule avec un floor qui devrait marcher dans tous les SQL
r16475 | fil       | report oublie de [14484] (bug dans l'API sql_* : le mysql_error() est en effet lie a la derniere connexion ouverte, il faut donc passer systematiquement la variable serveur si on veut pouvoir parler a deux connexions en meme temps (sinon, seule la derniere connexion ouverte parle) ; cf.  http://php.net/mysql_error j'imagine qu'il va falloir etendre aux autres portages)
r16476 | fil       | suite de [16475]
r16478 | bb        | coquille (mieux qu'une virugle BoOz :p)
r16480 | cedric    | lorsque la balise <head> contient des attributs, il faut quand meme etre capable de poser un <base...> en urls arbos
r16485 | cedric    | #1967 ne pas mentionner explicitement 0minirezo mais s'en refereer aux autorisation pour editer une rubrique(reliquat de [8438] modifie par [8466])
r16486 | fil       | ne pas mourir lorsqu'on demande juste l'errno et l'error suite a une erreur sql (retour donc sur [16476] , denoncee par kent1 comme cassant la mutu)
r16488 | cedric    | Report de [16075] pour resoudre #1916
r16499 | davux     | Permettre Ã  urls_generer_url_xxx() de passer la mainReport de [16492] et [16497], appliquÃ© Ã  tous les schÃ©mas d'URL.
r16510 | cedric    | lorsqu'aucun login n'est saisi, renvoyer un message 'L'identifiant "" est inconnu' est un peu incomprehensible.Preferer un 'Cette information est obligatoire' sur le champ login !
r16513 | cedric    | ne pas confondre le filtre |balise_img qui produit une balise HTML <img> a partir d'un nom de fichier, et la fonction qui definirait la balise SPIP #IMG (denisb)Du coup la fonction balise_img() devient moins pratique a utiliser dans le PHP. Faut-il proposer un nommage alternatif |tag_img pour cela, voire |img_tag ou tout simplement |img ?
r16516 | esj       | Lors de la mise en squelettes ([12385]) des flux RSS des forums, auparavant assurÃ©s par l'action {{{rss}}}, la clause LIMIT ajoutÃ©e par celle-ci aux diffÃ©rentes requÃªtes SQL n'avait pas Ã©tÃ© reportÃ© dans chacun des squelettes. Du coup, lorsqu'on s'abonne Ã  un vieux site, le flux peut contenir des milliers d'entrÃ©es que SPIP n'a pas le temps de produire. Le problÃ¨me avait Ã©tÃ© vu et corrigÃ© par [14646] pour les flux publics, mais pas pour les flux privÃ©s.
r16518 | denisb    | le parseur xml doit pouvoir repÃ©rer tous les 'white space character' dans les tag (voir : http://www.w3.org/TR/REC-xml/#AVNormalize) et ne pas se limiter au seul 'espace'.on peut donc Ã©crire dans son fichier xml : {{{  <mon_tag	type="truc"	chose="bla"  > }}}
r16521 | esj       | Le calcul du nom de login Ã  partir du mail n'avait jamais marchÃ©. Six ans aprÃ¨s [3824] on s'en aperÃ§oit.
r16523 | denisb    | suite de [16518].suppression de l'espace malvenu en fin de contenu d'un tag. causait (par exemple) l'impossibilitÃ© d'un appel du type :{{{ #CHEMIN{#PLUGIN{cfg, icon}}}}}
r16526 | denisb    | reprenons [16523] et corrigeons en amont plus proprement.plus petit commentaire.
r16529 | kent1     | CrÃ©er les bon chemins pour les plugins dans un _DIR_PLUGINS_SUPPL
r16530 | denisb    | finalement, on revert [16523] et [16526].on ne touche pas au parseur xml, mais on nettoie le superflu retournÃ© dans la fonction get_infos() (cerdic)
r16538 | kent1     | Un pipeline pour pouvoir avoir de nouveaux statuts d'auteurs visibles ...
r16539 | cedric    | permettre d'augmenter la duree des sessions via define('_RENOUVELLE_ALEA',..) n'avait aucun effet puisque les sessions de plus de 48h etaient supprimees au moindre login, ce delai etant lui en dur.On le modifie au profit de 4*_RENOUVELLE_ALEA.
r16541 | kent1     | Un pipeline non dÃ©clarÃ© ...
r16542 | esj       | Lors de la refonte du dÃ©busqueur pour qu'il donne plus d'informations, et cela dans la langue de l'utilisateur, celle-ci est devenue Ã  tort la valeur par dÃ©faut de la langue des traductions de chaÃ®nes de langue lors de l'exÃ©cution d'une balise dynamique. Ce changement a Ã©tÃ© opÃ©rÃ© par [14322] en bas, oÃ¹ {{{\$GLOBALS['spip_lang']}}} est remplacÃ© par {{{_q($GLOBALS['spip_lang])}}} c'est-Ã -dire par un calcul immÃ©diat (Ã  la compilation) au lieu d'un calcul diffÃ©rÃ© (Ã  l'exÃ©cution). Comme l'appel de {{{recuperer_fond}}} a toujours Ã©tÃ© prevu pour founir la bonne valeur par dÃ©faut, on n'aurait en fait jamais dÃ» trimbaler cette valeur jusqu'Ã  {{{synthetiser_balise_dynamique}}}, qui donc ne s'en soucie plus.
r16544 | kent1     | Qui ne dit rien consent ...Si le champ est null on retourne null et non pas une valeur vide '' dans les CVT
r16550 | cedric    | Lorsqu'un nouvel inscrit se connecte pour la premiere fois, sa session est corrompue au moment ou on lui fixe son statut definitif (en remplacement de 'nouveau) car la globale visiteur_session n'a pas encore ete chargee mais est utilisee par session_set.Charger la session au prealable du changement de statut, donc, dans ce scenario.
r16553 | kent1     | Des accents oubliÃ©s sur une chaine de langue
r16556 | esj       | Le find_in_path pour la DTD locale introduit par r15963 n'Ã©tait pas assez gÃ©nÃ©ral car contraint en amont par le prÃ©fixe 'prive'
r16558 | esj       | Accpeter dans une DTD un Ã©lÃ©ment Ã  contenu totalement vide (mÃªme pas EMPTY explicite).
r16560 | esj       | CrÃ©er le repertoire de cache des DTD (source et compilÃ©e) en dÃ©but d'analyse, dans le cas d'une DTD locale qu'on ne recopie pas, l'Ã©criture du cache Ã©choue s'il n'est pas lÃ  (Eric).
r16562 | kent1     | Comme cela n'a pas l'air de dÃ©chainer les passions ... Je commites dÃ©jÃ  cela pour Ã©viter d'avoir des urls menant vers des fichiers ou rÃ©pertoires existants
r16563 | kent1     | On revert ... et on garde ce bug ... (rÃ©glable dans un htaccess Ã  priori)
r16567 | cedric    | un mutualisation avec repertoire, se fier au chemin de spip.php via $_SERVER['SCRIPT_NAME'] ne marche pas.On detecte ce cas par le fait que le repertoire temporaire est different de _NOM_TEMPORAIRES_INACCESSIBLES, et on s'en remet alors a adresse_site comme auparavant.Mais les sites normaux garde la possibilite d'etre accessible par plusieurs urls avec des profondeurs differentes.
r16569 | denisb    | ne plus masquer les warning. 
r16575 | bb        | report de r16574 (deux customs events pour se brancher en dÃ©but et fin de l'action des blocs depliables)
r16577 | bb        | jQuery 1.4.4 avec 5 jours de retard...
r16580 | esj       | Include manquant pour la fonction Typo lorsque l'on rappatrie un document distant.
r16587 | kent1     | Un hack assez moche qui doit Ãªtre trÃ¨s ancien de moins
r16588 | kent1     | Un grep me donne cet autre hack moins grave apparemment mais lÃ  quand mÃªme 
r16589 | romy      | Des boutons d'admin fixes, pour ne plus les perdre de vue, et translucides, pour voir en dessous.
r16590 | kent1     | Si l'id_auteur == 0, il n'est pas crÃ©Ã© donc il n'est pas intervenu dans le site, donc on n'essaie pas d'afficher ses articles et autres...
r16591 | cedric    | Dans les flux RSS, certains editeurs croient bon de forcer un retrait avec des &nbsp; en debut de texte.On trim donc le contenu des flux en prenant en compte ces &nbsp; en debut ou fin de texte, comme des espaces.
r16592 | cedric    | Revert de [16591] qui est doublement mauvais. Je me cache.
r16593 | cedric    | Dans le cas ou on ne garde qu'un resume des contenus syndiques, nettoyer les espaces insecables eventuels utilises par l'esiteur du flux pour faire du retrait avec une fonction trim_more
r16594 | cedric    | utiliser la syntaxe abregee jQuery(function(){...}) ou $(function(){...})au lieu de jQuery('document').ready(function(){...}) (ou $..)permet un chargement asynchrone de jQuery avec une fonction temporaire factice jQuery qui collecte les function pour les executer lorsque jQuery est reelement disponibleOn veillera donc a utiliser systematiquement cette ecriture
r16595 | esj       | Depuis que l'espace privÃ© utilise aussi des squelettes, il faut mettre la profondeur d'URL dans le contexte implicite des pages cachÃ©es, sinon les pages cachÃ©es utilisant les balises URL_* produites dans un des espaces seront exploitÃ©es Ã  tort quand elles seront demandÃ©es Ã  partir de l'autre espace. Cela est en particulier le cas du squelette 404 et ceux qu'il incluent, exploitÃ© par les 2 espaces.
r16597 | bb        | permettre d'utiliser l'autorisation editermots sans avoir Ã  passer $opts['groupe_champs'] Ã  celle-ci (pratique lors de son utilisation dans un squelette).report de http://zone.spip.org/trac/spip-zone/changeset/42435
r16599 | cedric    | Attention, par defaut sql_showtable ne traduit pas les prefixes spip_, il faut lui passer le second argument a true pour cela.Bloquait la recopie des tables en fin d'import depuis une version ancienne si le prefixe de la table principale n'etait pas spip_ (emmanuel)
r16601 | kent1     | on revient sur [16538]- On supprime le pipeline ajoutÃ© qui ne sert Ã  rien- On teste juste les mÃªmes valeurs Ã  chaque fois que l'on utilise traduire_statut_auteur() plutot qu'une fois la clÃ© et une fois la valeur de $GLOBALS['liste_des_statuts']
r16602 | esj       | La correction des URL_* par r16595 ne marchait pas pour les URL-arbos (CÃ©dric), en voici une autre.
r16607 | davux     | Report de r16605 (mise Ã  jour de l'URL des changesets)
r16613 | booz      | Une boucle forum avec le critere {recherche} et le critere {plat} ou {tout} ne doit pas agrÃ©ger les rÃ©sultats par thread
r16614 | booz      | oups
r16618 | davux     | Report de r16616: ajout de langue Nasa Yuwe (pbb)
r16621 | davux     | Dans les flux RSS, encoder en entitÃ©s XML, pas HTMLReport de http://zone.spip.org/trac/spip-zone/changeset/42644
r16623 | cedric    | L'optimisation de la maj des popularites par un sql_alter est un non sensen sqlite qui ne sait pas faire d'alter et est oblige de faire des contorsionspour y arriver. Avec consequence que ca peut casser au milieu et rendre lesreferers non fonctionnels. On fait donc ici un test sur le type de base utilisepour faire un sql_update simple dans le cas sqlite
r16624 | cedric    | ecrire_meta ni liberait pas la ressource sql. Cela pose probleme en sqlite, en particulier si on essaye de faire un sql_alter apres un ecrire_meta.On corrige aussi la fonction lire_metas qui ne liberait pas non plus la ressource sql.
r16625 | cedric    | Google&co indexe les urls courtes microbloguees. Il convient donc de les rediriger parun status 301 afin d'indiquer que cette adresse courte est definitivement renvoyeevers l'url complete
r16629 | bb        | report de r16628 ( alt au sketch : depuis r15394 on Ã©chappait plus l'attribut alt de l'image (patv) ) 
r16635 | bb        | report de r16631 et r16333 pour rÃ©gler #1957 ( Ce script ne fonctionne pas en 2.3 et provoque un bug bloquant en 2.1 (cf ticket #1957 ), On gÃ¨re le cas ie7 bien plus simplement depuis la feuille de styles. / evacuons cette exception de traitement qui n'a plus lieu d'etre. Toutes les protections de champs sensibles sont assurees a la declaration de la table des traitements, par les extensions )
r16636 | cedric    | oups, double ligne inutile introduite par [16625]
r16643 | davux     | Report de r16639 : Permettre de surcharger _BALISES_BLOCS dans mes_options Ne pas rÃ¢ler si _BALISES_BLOCS a Ã©tÃ© surchargÃ© dans le fichier d'options (par exemple parce qu'on a beau comprendre la thÃ©orie, on trouve Ã§a naze que ins et del provoquent des coupures de paragraphe). 
r16667 | cedric    | report de r16459 :dans une pagination, lorsque la page demandee etait superieure au nombre de resultats, cela provoquait une boucle vide et des messages saugrenus du genre "Il n'y a aucun ...".On borne donc, et dans tous les cas, la boucle affiche ce qui correspond a la derniere page de la pagination.Ainsi, si en ajax on retire des elements de la liste paginee, celle-ci revient automatiquement a la page precedente lorsqu'on a vide la deniere page.+ saturation de la page courante affichee a la valeur de la derniere page
r16675 | fil       | retour de l'etoile sur le bouton d'admin quand la page est prise dans le cache
r16677 | fil       | revert [16675] commite par erreur
r16682 | cedric    | ne pas introduire de styles en dur dans les tableaux, mais preferer injecter une classe "numeric" sur les colonnes numeriques. Elle est completee par une classe "virgule" ou "point" selon le separateur, meme si non utilisable pour le moment faute d'implementation dans les navigateurs
r16725 | cedric    | report de r16582 : depiler la langue lorsqu'on l'a changee
r16731 | fil       | mieux loger le genie

Extensions 2.1.2 -> 2.1.3 ( mi dec 2010 ) 
r40009 | cedric    | pas de division par zero
r40085 | real3t    | 2 bugs : * le charset dÃ©fini dans spip_meta n'Ã©tait pas correctement rÃ©cupÃ©rÃ©* le header n'Ã©tait jamais envoyÃ©Le bug n'Ã©tait visible que sur un site oÃ¹ apache avait sont charset par dÃ©faut Ã  autre chose que utf-8
r41348 | marcimat  | Mise Ã  jour de Markitup en version 1.1.8 + Corrections pour les sÃ©lections automatiques de mots sous OpÃ©ra.
r41349 | marcimat  | Commentaires en moins.
r41384 | cedric    | mettre en define le code d'insertion des js compresse pour permettre d'y ajouter un attribut defer pour ceux qui le veulent
r41390 | cedric    | plutot qu'un define, on utilise deux callback surchargeables compacte_ecrire_balise_link() et compacte_ecrire_balise_script() pour produire les balises des css et js compresses
r41452 | kent1     | Des broutilles
r41613 | marcimat  | Report partiel de [41612] (strlen doit Ãªtre une chaine)
r41959 | kent1     | La version en anglais du plugin.xml + on utilise le plugin bando en 2.1 pour Ãªtre sÃ»r de passer derriÃ¨re pour les autorisations de voir les boutons au moins (peut Ãªtre Ã  revoir)
r41960 | kent1     | On est passÃ© en objet/id_objet
r41987 | kent1     | Changement du nom de la fonction email_notification_forum pour ne pas avoir de problÃ¨mes avec le plugin notifications ni la fonction du core de SPIP (en 2.1)
r41988 | kent1     | On surcharge inc/regler_moderation de la 2.1 pour Ã©viter une erreur sql et voir le nombre de messages de forums de l'article
r41989 | kent1     | $mydate s'Ã©tait paumÃ© quelque part
r42194 | kent1     | DÃ©clarer la fonction du pipeline mÃªme si elle ne fait rien :- elle permet de charger ce fichier pour utiliser l'autre fonction - cela Ã©vite de recalculer les pipelines parce que SPIP ne la trouve pasÃviter les espaces disgracieux en dÃ©but de ligne dÃ»s au filtre |oui
r42215 | fil       | un media css non precise est equivalent a all ; on groupe
r42254 | arno*     | Bug des filtres MSIE quand on transforme les codes couleur.
r42398 | cedric    | Racourcir les couleurs sans casser filter(...) et accelerer la regexp sur les declarations vides en l'accrochant sur \s
r42593 | cedric    | spritons ces 29 icones pour eviter de multiples hit. C'est surtout genant sur les pages publiques qui contiennent un forum (meme si cela ne concerne alors que 6 icones) (avec le sprite, donc)
r42674 | kent1     | charger_filtre pour trouver le filtre generer_info_entite permettant en 2.1 d'aller le chercher dans spip_bonux plutot que le coreOn nÃ©cessite spip-bonux pour la version 2.1
r42787 | cedric    | ne pas perdre la transparence avec le filtre |image_renforcement



2.1.0  -> 2.1.1

r15605 | romy      | Ces parentheses residuelles dans les boutons d'admin etaient vraiment trop bizarres.
r15607 | cedric    | switcher sur les extensions du tag
r15609 | cedric    | Ne pas supprimer les espaces insecables (forums), et ne pas toucher au texte quand aucun mot n'est plus long que la limite
r15610 | cedric    | sql_error() doit renvoyer une chaine vide quand il n'y a pas d'erreur ! corrige une erreur dans [14529] qui a de plus le mauvais gout de ne pas avoir ete portee sur postgre et sqlite
r15612 | arno      | Cache etait fixe a  0.
r15613 | cedric    | report de [15578]
r15614 | cedric    | report de [15579]
r15615 | kent1     | Les autorisations etaient manquantes
r15617 | cedric    | ne pas ignorer $option='continue' dans sql_getfetsel (commito et azerty)
r15618 | fil       | remettre un peu de display sur les elements du debug
r15620 | cedric    | le correctif de [15401] etait incorrect car en cas d'url arbo ajouter spip.php est faux. On ajoute simplement une ancre.
r15624 | esj       | La fonctionnalite [14862] de base/upgrade aurait da tre incluse dans SPIP 2.1.0, mais a ete oubliee. Je la remets, autrement dit je copie ce fichier de la 2.2 vers la 2.1 moins [14627] mais j'ai l'impression que la  aussi c'etait qqch de prt et d'oublie. Toujours autour du fichier base/upgrade, [14730] n'avait pas applique le mme correctif sur la 2.2 que sur les autres, je resyncrhonise.
r15625 | rasta     | Un espace avant l'URL pour que les mauvais logiciels de mail la reconnaissent comme lien
r15627 | fil       | http://trac.rezo.net/trac/spip/changeset/15329/branches/spip-2.1/ecrire/inc/filtres.php introduisait des espaces en trop, et http://trac.rezo.net/trac/spip/changeset/15535 les perennisait
r15628 | esj       | Eviter un offset indefini, d'ailleurs absent en 2.2
r15629 | esj       | Indefinis dans un log.
r15630 | esj       | Eviter un indefini systematique
r15631 | fil       | controler le statut afin d'eviter de reproposer un article deja publie (#1932)
r15635 | kent1     | Ce n'est pas parce que l'on ne dispose pas de la fonction "imagerotate" (qui n'est disponible que si PHP est compile avec la version embarquee de la bibliotheque GD => http://www.php.net/manual/fr/function.imagerotate.php) que l'on ne peut tourner les images ... 
r15636 | esj       | En gerant plus soigneusement l'acces aux bases externes dans un SPIP mutualise, [14265] avait laisse passer la base courante comme base externe possible alors qu'il etait bien prevu de ne pas proposer cette idiotie.
r15637 | esj       | Du code mort depuis [15121] qui provoquait une bardee d'indefinis inutilement alarmants.
r15638 | esj       | Une base SQL homonyme au login SQL n'etait plus pre-selectionnee a  l'installation. Et retrait de qq indefinis.
r15639 | esj       | La liste des bases disponibles en PG avait saute lors de la revision generale des erreurs SQL de [14543].
r15640 | eric      | Ajout d'un 5eme argument title dans la balise #BOUTON_ACTION pour afficher des bulles sur les liens.
r15641 | eric      | Oups un debug non supprime
r15642 | esj       | La chaane {{{base_reconnue}}} n'etait pas reconnue car c'est en fait {{{install_base_ok}}} (pas bazooka hein).
r15643 | esj       | Deux bugs pour le prix d'un: la liste des tables d'une base se fait systematiquement sur le serveur principal, les bases externes sur un 2e serveur n'etaient jamais decrites. Ce code etait de plus inutilement duplique.
r15645 | esj       | Mme pas capable d'envoyer le mme correctif dans les 2 branches ([15639])
r15646 | esj       | Suite de [15643]: trois bugs pour le prix d'un.
r15647 | esj       | Quatre bugs pour le prix d'un, je vais me coucher.
r15648 | esj       | La detection automatique de tables externes en PG ne marchait plus.
r15649 | salvatore | langues (spip)
r15650 | salvatore | langues (ecrire)
r15651 | esj       | Indefinis desagreables.
r15652 | esj       | Indefinis
r15653 | esj       | Code mort, et d'ailleurs inexecutable. A noter que la 2.2 semble en retard par rapport a  ca.
r15654 | esj       | Un saut de ligne en plus de {{{<br />}}} sinon la copie d'une requte SQL dans le debusqueur acolle les mots cles.
r15655 | cedric    | pipeline post_insertion, permet aux plugins de rattacher des objets aux en attente au moment de la creation en base de l'objet principal+ correction sur le pipeline pre_insertion pour spip_auteurs
r15660 | cedric    | [15562] avait remplace a tort addcslashes(..,"'\\") par addslashes avant de le generaliserResultat, impossible d'avoir un " dans un mot de passe sql (thomas)
r15662 | cedric    | lorsque l'id retourne est nul, c'est aussi une erreur
r15664 | denisb    | on integre width et height dans le tag img des puces. 
r15667 | esj       | Pour appliquer le validateur XML en boucle sur un repertoire de plugin, il faut faire {{{basename}}} dessus avant d'appeler {{{charger_fonction}}}. Mais avant SPIP savait que le script {{{export_all}}} ne devait pas tre soumis a  la validation, il y a qqch de change qq part.
r15669 | fil       | en cas de connexion sql morte, un vieux cache exploitable doit passer par gunzip (experience vecue)
r15671 | fil       | a cause de l'intransigeance du compilateur sur la casse, les stats en CSV etaient cassees
r15672 | esj       | Table des metas et procedure de mise a  jour: generalisation. La fonctionnalite [14862] introduite en retard dans SPIP 2.1 par [15624] permettant aux plugins d'utiliser la fonction {{{maj_while}}} pour leur propre mise a  jour avait deux lacunes. La premiere etait d'arrter tout le processus en cas de probleme, alors que pour un plugin c'est un blocage rarement legitime. La fonction {{{maj_while}}} retourne donc a  present un resultat (vide si ok, infos si echec), et c'est l'appelant qui decide d'arrter les frais ou pas. Teste sur une grosse mise a  jour 1.9.2 -> 2.1.0dev sans pb apparent. L'autre lacune concernait une confusion possible sur la meta a  utiliser pour assurer la reprise sur interruption. C'etait assez theorique, mais de fil en aiguille, on se retrouve avec une fonctionnalite encore plus generale: les fonctions {{{ecrire_meta effacer_meta lire_metas inc_meta_dist}}} s'appliquent sur eventuellement d'autres tables que spip_meta, en gerant un cache pour chacune. Cette fonctionnalite permet en particulier a  chaque plugin d'avoir sa table des meta, ce qui facilite la sauvegarde de tout ce qui le concerne, et fournit un acces a priori bien plus rapide que l'avalanche d'objets et de tableaux que CFG alloue a  chaque appel de lire_config. 
r15673 | esj       | Generalisation des tables des meta: prendre l'alea ephemere de la table des metas standard en toute circonstance.
r15674 | fil       | ajout du type='mime/type' sur le raccourci {{{ [<emb1>->doc1] }}}
r15675 | esj       | Metas multi-tables, suite de [15762]: le numero de version de l'ensemble des tables SQL du plugin n'a pas non plus a priori a  tre dans la table generale des meta. En consequence, on repere maintenant dans {{{plugin.xml}}} un element optionnel {{{meta}}} qui indique la table des meta specifique du plugin. Cette information est utilisee par {{{spip_plugin_install}}} qui appelle les fonctions {{{upgrade}}} et {{{vider_tables}}} specifique du plugin en leur transmettant cette information, et qui en tient compte pour trouver le dit numero de version et le comparer a  celui figurant dans {{{plugin.xml}}}. La meta ayant pour valeur ce numero est {{{version_base}}} si la table est specifique, et {{{$PLUGIN_version_base}}} sinon, comme auparavant.
r15676 | kent1     | Restauration correcte des types mime des fichiers Ogg sur les branches 2.1 et 2.2 (http://trac.rezo.net/trac/spip/ticket/1941). Ajout des types de fichiers : f4a/f4b/f4p/f4v/mpc (http://en.wikipedia.org/wiki/Flv#File_formats) sur les branches 2.1 et 2.2. Report du commit oublie : 14272 (http://trac.rezo.net/trac/spip/changeset/14272) sur la branche 2.2. Upgrade de la base en version 15676 sur les branches 2.1 et 2.2. Rend homogene (cosmetique) les espaces dans les arrays des documents
r15677 | kent1     | un alt vide sur les icones des plugins pour la validite xhtml (branches 2.1 et 2.2)
r15678 | esj       | Il est contre-intuitif que la balise {{{#PLUGIN{nom, info}}} ne marche que pour 4 valeurs de {{{info}} et pas pour toutes celles calculees par {{{plugin_get_infos}}}. Ni les unes ni les autres ne sont d'ailleurs documentees.
r15679 | cedric    | traiter les src de progid:DXImageTransform.Microsoft.AlphaImageLoader(src=...) lors du passage en url absolue dans les css
r15680 | esj       | Donner a  afficher_plugin un argument optionnel supplementaire, permettant de remplacer CFG par un autre outil de configuration.
r15681 | esj       | Oups
r15682 | esj       | Autre solution que [15680] a  l'abstraction de l'appel a  CFG: appeler celui-ci en lui donnant un autre script de configuration que lui-mme (cf [http://zone.spip.org/trac/spip-zone/changeset/38187 SPIP-Zone 28187]), trouve sous la balise {{{config}}} de {{{plugin.xml}}}. Ca permet une transition en douceur vers l'abandon du traitement des metas du plugin dans CFG sans renoncer au reste, du moins dans un premier temps.
r15683 | esj       | Fin de l'abstraction de l'appel a  CFG: la balise {{{config}}} de {{{plugin.xml}}} donne finalement une fonction retournant un groupe de liens (un seul en general) qui renvoie sur les scripts d'installation. Cette fonction doit tre presente dans les fichiers indiques par la balise {{{install}}}. Par defaut cette fonction est celle chargeant CFG et utilise {{{icone_lien_cfg}}}. 
r15684 | esj       | Manque un >. Resoud #1942.
r15685 | esj       | En eliminant {{{intval}}} pour laisser passer les grands entiers connus de SQL mais de PHP, [13858] avait fait saute ce qui permettait au validateur en boucle d'inferer quels arguments d'un squelette sont numeriques. Il faut detecter a  present {{{sql_quote(... 'int')}}}.
r15691 | rasta     | Compatibilite avec PHP 5.3 : celui-ci definit une nouvelle constante E_DEPRECATED pour la gestion des erreurs et notices. Du coup quand les gens mettent a  jour vers la 5.3 ils voient apparaitre des erreurs qui n'etaient pas visibles avant. C'est bien sar toujours modifiable mais par defaut SPIP ne doit afficher que les vraies erreurs. On retablit donc ce comportement.
r15696 | davux     | Report de [15694] et [15695] C'est comme ca qu'on dit ?
r15697 | fil       | mode TEST: des define() judicieux permettent d'invalider microblog et envois d'email ; exemple :
r15698 | fil       | gros bug sur la gestion du {{{ header('HTTP/1.1 404 Not Found'); }}} ; le systeme renvoyant une chaine contenant du php...
r15700 | cedric    | [15683] avait casse la desinstallation
r15702 | fil       | meilleur controle des forums en eliminant une erreur SQL (en cas de recherche a zero resultat), en permettant la recherche par IP, et en affichant les link meme s'ils ont un {{{[style=position:relative left:-999px]}}} (a reporter dans le plugin ?)
r15703 | cedric    | is_numeric plutot que is_int
r15704 | salvatore | langues (spip)
r15705 | salvatore | langues (ecrire)
r15706 | salvatore | langues (public)
r15707 | marcimat  | Lors d'une utilisation dans l'espace public, l'appel de la fonction autoriser() n'est pas connu ici etrangement.
r15708 | marcimat  | evidemment ca ne reagit pas pareil entre administrateur et redacteur... il y avait une autre autorisation appelee dessous, remontons l'appel a  inc/autoriser de quelques lignes...
r15709 | marcimat  | Il faudra peut tre penser a  mettre autoriser() dans inc/utils... ca devient aberrant des qu'on utilise les formulaires dans l'espace public.
r15710 | bruno     | fermer #1943 : ne pas choper les input dont le name est identique a  l'id recherche
r15711 | cedric    | sortir la depublication conditionnelle d'une rubrique dans une fonction depublier_rubrique_if() utilisee par la fonction de depublication d'une branche. Permet a un plugin qui modifie l'arborescence des rubriques de reutiliser cette fonction
r15712 | cedric    | lorsqu'on institue un article, passer statut_ancien dans les pipeline, car les plugins ne peuvent pas le connaitre, sauf a faire une acrobatie bien compliquee ...
r15713 | bruno     | de quoi brancher le plugin notifications sur les inscriptions
r15717 | esj       | [14199] etait incomplet. On renonce provisoirement a avoir une solution propre pour cette erreur de conception quant aux separateurs apres une balise.
r15718 | esj       | En mode debug, forcer le Content-Type a  HTML, ce que faisait implicitement les anciennes versions. Et ne pas non plus faire l'echo final.
r15720 | esj       | Prise en compte des fausses balises comme dans les versions precedente de SPIP, pour le meilleur et pour le pire.
r15721 | cedric    | complement a [15683] :ne pas echouer en erreur fatale si la fonction indiquee dans <config> n'existe pas, et permettre d'indiquer dans <config> le nom d'un exec du plugin, qu'on verifie par le presence du script php dans exec/ ou du squelette html dans prive/exec/
r15723 | esj       | Configuration des plugin, suite et (semble-t-il) fin. La page des plugins actifs est construite a  present a  l'aide d'un mini-squelette {{{prive/cfg.html}}} qui auparavant se reduisait a  des balises A en dur dans le code referencant le plugin Cfg. C'est donc maintenant un vrai squelette, utilisant la balise {{{#URL_ECRIRE{configurer_}}}nom-du-plugin{{{{}}}. Il suffit donc d'avoir un script PHP ainsi nomme dans {{{exec/}}}, ou un squelette ainsi nomme dans {{{prive/exec}}}, pour qu'apparaisse dans le bloc du plugin l'icone de configuration avec un lien sur le configurateur.Si l'on souhaite donner un autre squelette (pour changer l'icone, inclure en Ajax le configurateur etc), il faut l'ecrire dans le repertoire du plugin et indiquer son nom dans la balise {{{config}}} de {{{plugin.xml}}}.La compatibilite avec Cfg est assuree: si {{{plugin.xml}}} demande d'utiliserCfg et ne contient pas la nouvelle balise {{{config}}}, c'est le mme codequ'auparavant qui est pris. Au passage, la balise {{{#URL_ECRIRE}}} est amelioree: si son argument lui ferait produire une URL inconnue elle ne retourne rien, ce qui permet des ecritures comme {{{[<a href="(#URL_ECRIRE{#SCRIPT})">cliquer ici</a>]}}} qui auparavant etaient vaines.
r15724 | bruno     | reparer les liens de config pour les plugins qui utilisent CFG
r15725 | esj       | La balise {{{URL_ECRIRE}}} a  l'origine etait applicable mme dans une boucle sur serveur distant. C'est par une intervention trop systematique sur les balises {{{URL_*}}} que ce test a ete introduit par [10136], test retire ensuite par [10138] car une solution avait ete trouve au probleme, sauf pour {{{URL_ECRIRE}}} qui en fait n'avait pas le probleme car cette balise reference par definition le serveur courant. Il est largement temps de supprimer ce test, puisque [15723] a revele incidemment que ce test gnait des plugins aui du coup avait besoin de la surcharger.
r15728 | esj       | Bien gerer le cas de la balise #URL_ECRIRE sans argument (Kent1).
r15730 | kent1     | On invalide le cache egalement dans le cas oa l'on change la configuration des visiteurs (utile pour de nombreux plugins utilisant cette valeur)
r15732 | kent1     | Pourquoi un simple <b></b> ici alors que les autres elements ensuite sont <h3></h3>...
r15734 | cedric    | il faut inclure les fichiers fonctions quand on utilise la matrice
r15735 | esj       | Si le premier argument de {{{spip_connect}}} n'est pas une chaane (normalement c'est le nom d'un fichier de connexion) assimiler systematiquement cette situation a  "''". Non seulement ca evite des erreurs  PHP, mais ca permet a  {{{calculer_url}}} d'tre appelee avec True comme dernier argument pour forcer un calcul d'URL dans l'espace public.
r15736 | salvatore | langues (spip)
r15740 | cedric    | include, effacer la meta crash plugin, et loger le cas ou l'on reconstruit la meta plugin supposement issue d'une vieille version, mais qui pourrait causer un bug !
r15741 | esj       | La reference a  la classe {{{spip-large}}} dans le bouton de previsualisation ne fonctionnait pas faute de charger la feuille de styles qui la contenait. On introduit une classe {{{spip-previsu}}}, ce qui permet de le faire disparaatre a  l'impression et d'alleger un peu le script incontournable {{{public.php}}}.
r15742 | cedric    | #1940 : reparer le w dans Opera. Verifie sur Mac dans Opera, FF et Safari. Devrait aussi reparer le bug dans IEx, a confirmer avant fermeture du ticket
r15743 | cedric    | #1939 : ne pas submit plusieurs fois un meme formulaire, meme si le redacteur tape ctrl+s frenetiquement
r15744 | esj       | Depuis que [14446] a regoupe tout le code concernant les criteres par partie a  la fin de la production du code compile, le test examinant au depart si un corps de boucle est totalement vide etait devenu faux. Resoud #1931.
r15745 | denisb    | la balise INTRODUCTION prend en compte le DESCRIPTIF aussi pour les rubriques (clt #1947)
r15748 | cedric    | ne pas vider l'adresse du site lors d'une install ! ...
r15749 | cedric    | #1945 : les accents et caracteres utf etaient pris en compte differemment dans le calcul du sha256 cote js et cote php. On uniformise l'algo, les caracteres sont tous pris en comptes en 16bits, et les deux implementations sont equivalentes sur les chaines non ascii pure
r15750 | cedric    | on annule [15749] le temps de trouver un chemin de migration qui ne casse pas les passes
r15751 | cedric    | [15749] en mieux : si tous les caracteres de la chaine sont en ascii purs, on calcule le sha sur des caracteres sur 1 octet, sinon on les passe sur 2 octets. Ainsi le sha256 des chaines sans utf sont inchanges, ce qui ne casse pas les hash deja dans la base. Les mots de passe avec accents sont donc acceptes maintenant (y compris avec alphabet chinois ou autre)
r15753 | esj       | Decoupage en deux de la grosse fonction {{{balise_formulaire__dyn}}} afin de pouvoir definir une balise dynamique qui ne s'en distingue que par le calcul du nom du squelette.Au passage, report dans la branche Dev de [15620] fait seulement sur la 2.1, pour corrigeait le mauvais correctif [15401]. 
r15754 | kent1     | Avoir un titre d'email propre (pas de multis ni de balises) dans le mail
r15759 | esj       | Introduction de {{{#FORMULAIRE_CONFIGURER_PLUGIN}}}, suite du chantier visant a  remplacer CFG (cf [15726] et [15753]).Cette balise admet au moins un argument, savoir le nom du plugin (donc le nom du sous-repertoire de DIR_PLUGINS) qu'il faut configurer. Ce repertoire doit contenir un sous-repertoire nomme {{{formulaires}}} contenant au moins un squelette. Le nom de celui-ci est donne soit par le 2e argument de la balise s'il est present, soit est pris conventionnelle egal a  {{{configurer_}}}{{prefixe_du_plugin}}}. Le contexte (calcule par une fonction {{{_charger}}}) est egal a  la table des metas associee a  ce plugins. Le traitement des saisies (fonction {{{_traiter}}}) consiste a  ecrire dans cette table des metas les valeurs (chaane vide si abstentes) que {{{$_POST}}} indique pour tous les noms trouves dans le formulaire, a  l'aide d'une RegExp (pas totalement fiable) reperant les attributs {{{name}}} dans le formulaire. Ces deux fonctions sont donc communes a  tous les formulaires de configuration de tous les plugins voulant les utiliser. Il n'y a pas de fonction {{{_verifier}}}, faute de savoir que verifier pour chacun (interface a  definir pour arranger ca). Pour fonctionner correctement, les formulaires references (implicitement ou non) par cette balise doivent utiliser {{{#ACTION_FORMULAIRE}}} avec comme deuxieme argument le nom du plugin. Voir un exemple dans le [http://zone.spip.org/trac/spip-zone/changeset/38755 plugin Association 2].
r15760 | esj       | Complement a  {{{#FORMULAIRE_CONFIGURER_PLUGIN}}}, qui maintenant sait retrouver la fonction {{{_verifier}}} propre a  un squelette (cf [15759] [15726] et [15753]). Je reexpose le tout vu les incomprehensions que ca a amene sur spip-dev. Cette balise admet deux arguments, un nom du plugin (autrement dit le nom d'un sous-repertoire de DIR_PLUGINS) et un nom de squelette dans le sous-repertoire {{{formulaires}}} de ce plugin. Si ce deuxieme argument est absent, il est pris conventionnellement egal a  {{{configurer_}}}''prefixe_du_plugin''. Le contexte de ce squelette est egal a  la table des metas associee a  ce plugin le nom de cette table etant calcule par la fonction {{{formulaires_configurer_plugin_charger_dist}}}.Le traitement des saisies  consiste a  ecrire dans cette table des metas les valeurs (chaane vide si abstentes) que {{{$_POST}}} indique pour tous les noms trouves dans le formulaire, a  l'aide d'une RegExp (pas totalement fiable) reperant les attributs {{{name}}} dans le formulaire. Ce traitement est assure par la fonction {{{formulaires_configurer_plugin_traiter_dist}}}.Pour la verification, la fonction {{{formulaires_configurer_plugin_traiter_dist}}} delegue le travail a  la fonction {{{formulaires}}}''_nom_du_squelette''{{{_verifier}}} si elle existe, et sinon ne fait rien. Ces trois fonctions sont donc communes a  tous les formulaires de configuration de tous les plugins voulant les utiliser, ainsi que leurs fonctions auxilaires (nomenclatures des saisies notamment). Elles peuvent evidemment tre surchargees. Pour fonctionner correctement, les formulaires references (implicitement ou non) par cette balise doivent utiliser {{{#ACTION_FORMULAIRE}}} avec comme deuxieme argument {{{configurer_plugin}}}, afin que le trio de fonctions ci-dessus decrit soit effectivement utilise. Voir un exemple dans le [http://zone.spip.org/trac/spip-zone/changeset/38755 plugin Association 2].
r15763 | cedric    | la previsu est une fonction d'admin, il faut l'y styler car spip_styles.css n'est pas forcement presente + un font-size inherit sur les textarea
r15764 | denisb    | [15357] etait une bien mauvaise idee. sql_updateq ne retourne jamais false mme si aucun update n'est effectue. il faut donc tester aussi sur la non pre-existence du lien pour que le insert soit lance (kent1)
r15767 | kent1     | Changer le statut lors dans la session lors du premier login d'un utilisateur
r15769 | kent1     | Ajout de 3 occurences du pipeline post_edition autour de la gestion des documents dont l'argument "operation" est different : - "lier_document" : lors de la ligature d'un document a  un objet spip (inc/modifier) - "delier_document" : lors de la suppression de cette ligature (action/documenter)- "supprimer_document" : lors de la suppression definitive de ce document (action/supprimer_document)
r15770 | kent1     | un petit oups ... Inclusion de inc/autoriser dans l'action supprimer_document 
r15771 | esj       | #FORMULAIRE_CONFIGURER_PLUGIN: ne pas mettre le chemin en dur, c'est une baisse de fonctionnalites (suite de [15760]).
r15773 | kent1     | Pouvoir surcharger la fonction vignette_par_defaut() de inc/documents. Elle devient inc_vignette_dit() dans inc/vignette et on appelle charger_fonction pour la charger.
r15778 | cedric    | eviter d'attendre 10s a chaque enregistrement de revision pour cause d'imprecision de SQL (equipement)
r15779 | esj       | Balise de configuration suite et fin pour les 2 branches (Dev et 2.1): * Identification dans les deux branches de la compilation de #ACTION_FORMULAIRE. L'erreur d'argument manquant n'etait pas traitee; vu l'usage quasi general, cette absence est assimilee a  un premier argument egal a  {{{#ENV{action}}}} ce qui allege l'ecriture.  * renommage dans la branche Dev de la balise de #FORMULAIRE_CONFIGURER_PLUGIN en #REMPLIR, ce qui evite d'y voir des problemes qui n'en sont pas et permet d'experimenter.      * retrait dans la branche 2.1 de ces 4K de code concernant cette balise afin de sortir une 2.1.1; il suffira de copier les deux fichiers {{{ecrire/balise/remplir.php}}} et {{{prive/formulaires/remplir.php}}} de la branche Dev dans une installation de la 2.1.1 pour experimenter dans cette branche.
r15780 | esj       | Complement a  l'harmonisation des deux branches pour la reutilisation de code CVT par [15779]: il manquait le fichier {{{formulaire.php}}}. Je remets la version std de {{{existe_formulaire}}} pour eviter toute difference entre la 2.1.0 et la 2.1.1 {{{#REMPLIR}}} peut faire sans. Et une scorie.
r15785 | cedric    | reparer form_hidden dans les urls html (bug dans la fonction urls_html_dist) et dans les urls standard (en delegant a urls pages quand on a affaire a d'anciennes urls)
r15789 | esj       | Pourquoi la page privee des petitions n'avait pas ses styles specifiques comme la plupart des exec ? C'est impossible a  styler, surtout a  l'impression! Ce n'est pas Bruno qui me contredira: je reprends ses noms de classes dans sa [http://zone.spip.org/trac/spip-zone/browser/_core_/plugins/petitions mise en plugin des petitions], pour autant que les differences de HTML le permettent. Et comme cette page n'avait pas bouge entre 2.0 et la 2.1. J'en fais aussi profiter la 2.0.11.
r15790 | fil       | Correction d'un bug CVT. Voici le scenario ; je travaille dans une page /sub/toto, j'y mets un CVT. Premier POST, l'action vaut "/sub/toto", ca marche.Supposons que j'ai une erreur dans ce premier POST. Le formulaire me revient, et la  j'ai action="toto" ; ca marche aussi me direz-vous. SAUF si j'ai un {{{<base href="/" />}}} dans la page. A ce moment-la  en effet ca. POST sur /toto, et c'est mort.
r15792 | davux     | Report de [15791]
r15793 | esj       | Page privee des signatures, complement a  [15789]: un bout de navigation apparaissait encore a  l'impression.
r15796 | davux     | Report de [15795]
r15798 | davux     | Report de [15797]
r15804 | cedric    | hum, la demande d'autorisation etait erronee, meme les admins devaient valider leur email par un clic dans leur boite mail lorsqu'ils changaient leur adresse, ce qui n'est pas normal. On corrige ca !
r15805 | cedric    | il ne faut pas echapper message_ok et message_erreur provenant de chager()
r15806 | cedric    | [15780] contenait des bugs sur la prise en compte de editable, formulaire_ok et formulaire_erreur, en sus de celle deja corrigee par [15805] On tente de retablir la prise en compte correcte depuis charger(), verifier() et traiter(), sans revert le code
r15809 | cedric    | [15806] ne corrigeait pas tout : si editable est fourni par charger(), il faut passer de true/false a espace/rien (kent1)
r15810 | fil       | en attendant que les discussions aboutissent, ne pas laisser de bug bloquant [15795]
r15812 | davux     | Report de [15811]
r15814 | davux     | Report de [15813]
r15815 | denisb    | supprimer l'eventuel index que l'on trouve parfois sur de vieilles spip_meta modifiees. peu importe d'oa ca provient, c'est suffisamment bloquant pour devoir tre pris en compte. ferme le ticket #1937
r15816 | cedric    | pas de valeur par defaut sur les passage par reference, sinon cela casse la compat PHP4 (gilles, denisb)
r15817 | cedric    | le cache chemin qui persiste alors qu'on fait var_mode=recalcul est qu'on est loge, c'est perturbant. Tout ca parce que le cookie admin est perime. On blinde donc ce cas la, sans impact perfo significatif pour le tout venant (un test sur _request et un test d'egalite de chaine)
r15818 | bruno     | eviter les doublons dans le pipeline jquery_plugins
r15820 | salvatore | langues (spip)
r15821 | salvatore | langues (ecrire)
r15822 | salvatore | langues (public)
r15823 | esj       | Tenir commpte du destinataire donne immediatement dans la messagerie interne, et respecter la syntaxe de PostGres pour les nombres. Corrige  #1808.
r15824 | cedric    | mimer json_encode en passant le test unitaire introduit par http://zone.spip.org/trac/spip-zone/changeset/39230
r15825 | fil       | en fait on redefinit json_encode()
r15826 | esj       | Mauvais contrle des droits  sur le logo d'un mot-cle, bug remontant a  la grosse reorganisation de la 2.0 la -dessus [10900] (Stephane Girault).
r15827 | kent1     | Ajout du nouveau container webm pour les contenus video et audio cf :  http://fr.wikipedia.org/wiki/WebM  http://www.webmproject.org/
r15828 | salvatore | langues (spip)
r15829 | salvatore | langues (ecrire)
r15830 | cedric    | eviter une boucle infinie a la mise a jour des plugins
r15831 | esj       | Reverifier les droits lors de la destruction d'un mot cle (Stephane Girault). Et en profiter pour afficher le titre du groupe a  partir de la table des groupes (on vient de la lire) plutt que le champ type de la table des mots, qui n'est pas compatible avec l'arabe.
r15832 | davux     | Correction d'URL propre pour les objets ayant un titre court. Commit identique au dernier commit sur l'extension "URL etendues" sur la zone: http://zone.spip.org/trac/spip-zone/changeset/39270
r15834 | esj       | Le rle du champ default_order semble avoir ete qq peu perverti. Ce depot corrige le cas du critere {{{inverse}}} intervenant apres le critere {{{IN}}}, ca me reste un peu obscur mais au moins ca corrige ce cas. Je laisse intacte la 2.0 pour servir de reference.
r15835 | cedric    | resoudre la perte de contexte sur des urls propres ou arbo de la forme article32. On revient sur [15832] qui ne faisait que masquer le bug et changeait des urls existantes
r15837 | cedric    | _url_propres_sep_id pour definir le separateur
r15839 | denisb    | faire en sorte que, comme en 2.0,  pour un document sans vignette specifique, LOGO_DOCUMENT** tout comme LOGO_DOCUMENT|fichier retourne le bon chemin vers prive/vignettes/ (sans ajout d'un IMG/ malvenu).
r15840 | cedric    | corriger direction_css pour qu'elle fonctionne sur les css en squelette (report de [15783])
r15841 | cedric    | charger_filtre() pour charger et chercher un filtre depuis le php
r15842 | cedric    | #PLUGIN{xxx,tout} permet de recuperer toutes les infos du plugin (eric)
r15843 | cedric    | [14453] avait casse la pagination indirecte lorsque le pas etait non connu a la compilation...
r15844 | denisb    | #LOGO_ : on s'aligne sur le traitement de #LOGO_DOCUMENT comme preconise par [13550], a  savoir #LOGO_RUBRIQUE{200, 0} est equivalent a  [(#LOGO_RUBRIQUE|image_reduire{200, 0})].clt le ticket #1930.
r15847 | esj       | Afficher la page en cas d'erreur, mais en essayant d'eviter que la feuille de style du debusqueur rentre en conflit avec celles de la page.
r15848 | cedric    | appels a notification sur instituerbreve et instituersite ne fait rien dans le core, mais permet l'utilisation de l'appel dans un plugin
r15849 | fil       | securite du js informer_auteur (credit: Dotsafe)
r15851 | fil       | gerer les caches sessionnes a plat et non dans un sous-repertoire ; la consequence est que pour chaque cache sessionne, on a deux fichiers : un (chemin_cache) qui indique qu'il est sessionne, l'autre (chemin_cache+_+session) qui contient la page elle-meme
r15852 | fil       | se baser sur lastmodified plutot que sur filemtime
r15853 | cedric    | consecutivement a [15851] il n'y a plus de sous repertoire de session. On laisse la purge recursive a true pour faire le menage, mais cela ne doit plus impacter le fonctionnement (plus d'erreur d'ecriture dans un sous rep inexistant)
r15854 | cedric    | en attendant d'avoir une architecture propre qui soit pratique en cas de bug,contentons nous d'une version pratique utilisable pour cette 2.1.1 avec sortie successive de la page calculee et des erreurs en superposition
r15855 | esj       | Complement a  [15849]: securiser un peu plus en amont pour eviter Warning et requtes SQL toujours vides.
r15856 | fil       | supprimer le controle de date sur les articles tres vieux (mathieu lopes) ; les articles marques dans le futur ne doivent toujours pas avoir plus de 48 heures d'avance, sinon un bug quelconque les fait passer devant ad vitam
r15857 | salvatore | langues (spip)
r15858 | salvatore | langues (ecrire)
r15859 | cedric    | se placer sur les extensions de la branche 2.1
r15860 | cedric    | permettre de reset toutes les notes a zero. Ne doit etre utilise qu'en contexte de test.

field spip_forum.ip compatible ipV6 (40 caracteres #1953)

-----------------------------


2.0.10 -> 2.1.0 
Trop de changements pour etre listes ici ... on reprendra pour la 2.1.1
voir http://www.spip.net/fr_article4728.html

2.0.9 -> 2.0.10 
Revision: 14695 report de [14694]
Revision: 14690 remplacement de la fonction ereg (obsolÃ¨te Ã  partir de php 5.3.0).
Revision: 14680 correction inserer_attribut : support des tags fermÃ©s sans espace avant />
Revision: 14678 Correction: les constantes {{{_INSTALL_USER_LDAP}}} et  {{{_INSTALL_PASS_LDAP}}} n'Ã©taient jamais pris en compte Ã  l'installation, et les messages signalant que l'Ã©tape courante a Ã©tÃ© franchie avec succÃ¨s n'apparaissaient pas. Plus un Log oubliÃ© et un meilleur contrÃ´le d'erreur.
Revision: 14677 eviter les cookie enregistrant des forums vides, report de http://zone.spip.org/trac/spip-zone/changeset/32429
Revision: 14676 [14673] avait introduit l'impossibilite de postdater avant publication, on retablit
Revision: 14673 utiliser les api pour que les plugins puissent faire leur travail
Revision: 14671 Heureusement que les utilisateurs de PHP complÃ¨tent sa doc: la connexion LDAP cryptÃ©e sur un autre port que le 389 ne doit pas utiliser la fonction {{{ldap_start_tls}}}, mais utiliser l'Ã©criture {{{ldaps://}}}{{serveur}}} comme premier argument de {{{ldap_connect}}}.
Revision: 14670 Les bases externes ne pouvaient plus Ãªtre dÃ©clarÃ©es car le paramÃ¨tre {{{install}}} dans l'URL ne veut plus forcÃ©ment dire qu'on est en train d'installer SPIP depuis le dÃ©but depuis que ces dÃ©clarations de bases externes ne sont plus faites Ã  l'installation initiale. Il faudrait terminer plus proprement la migration de ces scripts (Christian).
Revision: 14669 eviter de faire des sql_delete a tout va sur un calcul de page (pour une meta qui ne sert a rien qui plus est) 
Revision: 14668 report de [14666]
Revision: 14663 report partiel mais suffisant de [14659]
Revision: 14660 les messages d'erreur avant les input
Revision: 14647 et les notes n'etaient pas echappees
Revision: 14646 boucle infernale sur forum.spip.org, ou un article peut avoir qqs dizaines de milliers de forums ;-)
Revision: 14645 La suppression de vignette de document ne marchait pas dans ce cas lÃ  : action pas comprise car avait un /$id_document en trop qui ne sert pas dans l'action
Revision: 14640 Ce spip_log n'a plus de raison d'Ãªtre il me semble
Revision: 14635 reparer  <BOUCLE_art(ARTICLES){!id_mot IN (5,7)}>
Revision: 14628 utiliser redbot.org comme interface de test des entetes : merci @karlpro
Revision: 14626 permettre a un SSO de revenir sur le login avec un message d'erreur dans var_erreur
Revision: 14622 La possibilitÃ© de surcharge des attributs Ã  demander Ã  LDAP, introduite par [14608], n'a pas de raison de se limiter Ã  ce qui concerne la champ {{{login}}}, il faut pouvoir indiquer tous les champs Ã  lui demander. Tant qu'Ã  faire, on Ã©crit un code prÃªt Ã  recevoir cette indication via la dÃ©claration faite Ã  l'installation, mais pour l'instant Ã§a ne sert pas encore, c'est toujours la globale qui est utilisÃ©e. Je reporte en stable pour que la globale introduite prÃ©cÃ©demment pour aider Ã  rÃ©soudre [http://comments.gmane.org/gmane.comp.web.spip.user/149473 ce problÃ¨me sur la liste spip-user] n'y perdure pas plus.
Revision: 14614 Ok ([14605] et [14610]), pour chercher un mot dans plusieurs groupes, mais autant utiliser l'interface SPIP-SQL Ã  fond, du moment qu'on sÃ©curise en amont, sÃ©curisation qui rÃ©vÃ¨le une drÃ´le de chose: si le mot est crÃ©Ã©, c'est forcÃ©ment dans le premier groupe donnÃ©. C'est bien l'intention ?
Revision: 14612 gestion de la redirection lorsqu'on arrive sur le formulaire de login deja loge (ie retour d'une identification SSO) deleguer a traiter() le soin de calculer la redirection et appliquer eventuellement
Revision: 14608 PlutÃ´t que de dupliquer une fonction ([14601]), gÃ©nÃ©raliser une fonction existante pour Ã©viter que les Ã©ventuelles surcharges ne voient plus rien passer. Je profite de cette occasion d'intervention sur l'authentification LDAP pour passer en globale le tableau des noms des attributs potentiellement porteurs du login afin de rÃ©pondre Ã  [http://comments.gmane.org/gmane.comp.web.spip.user/149473 ce message de la liste spip-user], et reporte en stable pour qu'ils puissent rÃ©soudre leur problÃ¨me. Mais revoir le formulaire de dÃ©claration du LDAP pour y indiquer les correspondances entre champs du LDAP et champs de la table auteurs sera Ã  faire tÃ´t ou tard.
Revision: 14605 accepter plusieurs groupes possibles de recherche de mots-cles (avec les remerciements du selecteur generique)
Revision: 14599 La clause GROUP BY plÃ©thorique de cette requÃªte avait Ã©tÃ© introduite manuellement par [9841] au dÃ©but du portage PG, alors que depuis c'est fait automatiquement dans le fichier reg/pg.php. Retour au GROUP BY simple, beaucoup plus performant en MYSQL, et qui Ã©vite Ã  Oracle de rÃ¢ler car on ne peut y faire de GROUP BY sur un BLOB. / J'en profite pour resyncrhoniser les 2 branches 2.0 et 2.1 sur ce fichier, diffÃ©renciÃ©es superficiellement par [14576].
Revision: 14592 le bidule d'ajax de config_fonctions provoquait une erreur 'config_fonctions n'existe pas'
Revision: 14589 rÃ©parer la conversion des urls en urls absolues dans les fichiers css compactÃ©s.
Revision: 14572 Correction: retour du login automatique en fin d'installation, flinguÃ© par l'introduction du rÃ©pertoire {{{auth/}}} par [13435].
Revision: 14567 Autre rel='nofollow' en complÃ©ment de [14270] sur les calendriers.
Revision: 14566 PremiÃ¨re revision: [14487] avait remplacÃ© une erreur SQL par une autre
Revision: 14561 report de [14560]
Revision: 14558 support des formatx open xml de cro$oft : renommer docx en doc n'etait pas satisfaisant car les vieilles version de word se plantaient dessus, et par ailleurs il manquait toutes les declinaisons et les mime type
Revision: 14551 mise au carre des mots : il en manquait
Revision: 14550 mise au carre des controles sur les mots-cles -- report (adapte pour la branche 2.0) de [14549]
Revision: 14521 Erreurs SQL en multi-serveurs, suite: [14492] corrigeait dans la branche dev pendant que [14484] et [14489] corrigeaient dans la branche stable. Avec Ã§a, la stable est bien corrigÃ©e pour MySQL et PG, mais dans la dev il y a de toutes faÃ§ons le chantier en cours de l'abstraction des erreurs SQL, c'est encore incomplet.
Revision: 14519 report de [14504]
Revision: 14517 permettre la modification du choix d'apparaÃ®tre dans la liste des connectÃ©s au seul concernÃ©.
Revision: 14508 ne pas divulguer le login et pass a la base de donnees aux non webmestre qui n'y ont a priori pas acces
Revision: 14499 suite de [14495] concernant postgre
Revision: 14498 eviter une erreur fatale pour cause de double inclusion de url/propres via qs ou propres2
Revision: 14497 ajout d'un define pour indiquer Ã  partir de quel nombre de mots-clefs on abandonne la sÃ©lection dans une liste au profit d'une recherche.
Revision: 14495 complement a sql_delete : renvoyer le nombre de lignes affectees ou false en cas d'erreur.
Revision: 14491 report de [14452] sur l'unzip des pages distantes, qu'on a vu planter aussi sur spip.net
Revision: 14490 Correction de charger_fonction: ne pas ajouter de tiret si le dossier est vide, comme cela avait Ã©tÃ© fait pour la version de dev inopinÃ©ment en [13645] (Rasta).
Revision: 14489 Correction de la correction de [14484]: la globale dÃ©crivant la connexion n'est pas encore entiÃ¨rement dÃ©finie Ã  l'Ã©tape 3 de l'installation.
Revision: 14488 envoyer la date (de publication) avec le statut dans le pipeline notification lorsque l'on institue
Revision: 14487 petite erreur sql dans le pipeline premiere_revision ; report de http://zone.spip.org/trac/spip-zone/changeset/31517
Revision: 14484 bug dans l'API sql_* : le mysql_error() est en effet lie a la derniere connexion ouverte, il faut donc passer systematiquement la variable serveur si on veut pouvoir parler a deux connexions en meme temps (sinon, seule la derniere connexion ouverte parle) ; cf. http://php.net/mysql_error j'imagine qu'il va falloir etendre aux autres portages
Revision: 14483 Profiter de la table PHP des titres aussi dans les URL arbos (Rastapapoulos).
Revision: 14482 [14481] sans le commentaire !
Revision: 14481 En attendant mieux ? on remet le find_in_path() sur connect/$serveur.php qui permet le hack des boucles POUR et consÅurs.
Revision: 14479 Correction: lorsqu'une surcharge de l'installation comporte un appel Ã  un serveur externe, SPIP redonnait le serveur principal.
Revision: 14476 Correction de la pagination modifiÃ©e par [13993]#file0 car il fallait comprendre que l'index indÃ©fini Ã©tait volontaire, charge Ã©tant donnÃ©e au filtre de pagination de gÃ©rer cet indÃ©fini. On Ã©vite de ballader cet indÃ©fini en confiant cette gestion au code compilÃ©, mais Ã§a ne fait que cacher un peu mieux l'entorse signalÃ©e: pourquoi les modÃ¨les ne fournissent pas les paramÃ¨tres d'URL si c'est cela qu'on veut ? Par ailleurs, amÃ©lioration de #ANCRE_PAGINATION, qui doit tenir compte d'une Ã©ventuelle surcharge de la balise #PAGINATION.
Revision: 14471 choix des statuts pour le menu 'afficher les visiteurs' (#1802, paladin) ; a noter en branche dev le code n'a plus grand chose a voir
Revision: 14470 suppression des repertoires .plat, report de [14041] et resoud #1819
Revision: 14462 c'Ã©tait bien une fausse bonne idÃ©e. retour Ã  l'Ã©tat antÃ©rieur.
Revision: 14459 corrige l'affichage systÃ©matique (mÃªme si l'on n'est pas logguÃ©) des parties conditionnelles de la balise [aff_cond (#URL_LOGOUT) aff_cond] (mais Ã§a me semble plus une rustine qu'une rÃ©paration vÃ©ritable...)
Revision: 14451 suppression de flag_gz, remplace par une detection 'just in time' de la fonction , cf http://forum.spip.org/fr_216909.html pour la motivation
Revision: 14445 Correction du filtre {{{form_hidden}}}Â qui injectait le contexte d'URL trop systÃ©matiquement (report de [14444]).
Revision: 14442 Report de [14113] et de [13716] mais surtout de [13570] qui rend le #MENU_LANG propre pour le xhtml strict
Revision: 14433 une erreur dans ce test qui n'ajoutait jamais les [] lorsque l'Ã©lÃ©ment Ã  passer Ã©tait un array...
Revision: 14413 Correction de l'appel Ã  la version PostGres de listdbs.
Revision: 14409 Correction de la conversion en un entier de l'argument de sql_quote dans le critÃ¨re de comparaison: ce bug provoquait une tentative incomprÃ©hensible de se connecter Ã  i, serveur nommÃ© ''int'' (AurÃ©lien).
Revision: 14400 prevoir le cas ou minipres() est appele avant spip_initialisation_suite()
Revision: 14399 Cas rare ou $liste=array() affichait Array (Thomas Sutton)
Revision: 14394 [14393]Â en mieux.
Revision: 14393 Lors de la publication d'un article sur une branche de rubriques mettre Ã  jour toutes les dates de la branche.
Revision: 14392 report de [14096] a la demande generale de rastapopoulos
Revision: 14368 [14367] mais sans bug
Revision: 14367 charger mes_fonctions avant d'appliquer la table des traitements sur la previsu (patfr, report de http://zone.spip.org/trac/spip-zone/changeset/30736 )

2.0.8 -> 2.0.9 : changelog passÃ© Ã  la trappe 

2.0.7 -> 2.0.8 (11 mai 2009)
Revision: 13974 generer_action_auteur necessite au moins 2 arguments (eric)
Revision: 13972 amÃ©liorations du dÃ©busqueur (report de [13917], [13941] et[13944] ) 
Revision: 13971 ne pas confondre le parent de l'id que l'on demande a #EXPOSE avec le parent du principal qui lui est extrait du contexte de reference. Le premier est passe en parametre mais ne sert en fait a rien, le second doit du coup etre trouve par une requete sql. La confusion entrainait des trous dans la liste des objets a exposer si au premier calcul le parent n'etait pas le meme (tetue)
Revision: 13970  mise Ã  jour de jquery.form.js pour Ã©viter un bug sur IE8 et les formulaires ajax. ([13955], [13966] et [13967])
Revision: 13963 l'ecriture du tag en sortie des filtres images echouait si l'url initiale contenait des &. Un patch qui ne restera pas dans les annales mais fonctionne dans le cas des documents proteges
Revision: 13962 copie_locale renvoie toujours un chemin relatif a la racine, pas au repertoire courant (cas des documents proteges)
Revision: 13961 les filtres image appliques sur les images protegees par spip.php?action=acceder_document provoquent un appel a taille_image qui commet l'erreur de tronquer la chaine de get avant de faire copie_locale, et d'essayer vainement de copier spip.php en local. Si par malheur, la page d'accueil servie par spip.php dans ce cas contient une ou plusieurs images protegees retraitees, la boucle et bouclee, et le serveur par terre. Probablement donc, une cause serieuse de saturation serveur pour les utilisateurs du plugin acces_restreint
Revision: 13959 ValiditÃ© XHTML Un petit complÃ©ment Ã  [13957] pour parfaire la validitÃ© (Eric) 
Revision: 13954 Import des sauvegardes partielles: si le document est dÃ©jÃ  distant, ne pas ajouter le _DIR_IMG local, Ã§a ne rime Ã  rien. Par ailleurs, pas d'Ã©tat d'Ã¢me avec les vieilles tables: on ne peut insÃ©rer que des sauvegardes partielles de mÃªme constitution que la base d'accueil.
Revision: 13952 report de [13950] date en nepalais
Revision: 13951 correction du passage de langue dans les formulaires CVT : un formulaire dans un article diffÃ©rent de la langue du site (<formulaire|toto>) n'avait pas les bonnes traductions des fonctions _T() dans les fonctions verifier() et traiter(). (cerdic)
Revision: 13946 Correction de [13939]: se protÃ©ger du bloc de compatibilitÃ© des url_propres que le nouveau form_hidden interprÃ¨te de travers: autant ne pas passer par generer_url_entite si on a dÃ©jÃ  le paramÃ¨tre page, typiquement dans le cas du formulaire de recherche std (Eric).
Revision: 13943 Correction de l'erreur de syntaxe PHP du code compilÃ© lorsque le critÃ¨re {{{par}}}Â contient un appel de fonction SQL. Un peu Ã  l'arrach', mais Ã§a permet dÃ©jÃ  de retrouver la compatibilitÃ© avec ce que savait faire la 1.9 (Mathieu). Test {{{<ul><BOUCLE_t(RUBRIQUES){tout} {par SUBSTRING_INDEX(titre,".",-1)}> <li>#TITRE</li></BOUCLE_t></ul>}}}
Revision: 13942 Prendre en compte un nom et un mot de passe dans une URL de page distante Ã  rÃ©cupÃ©rer (StÃ©phane)
Revision: 13940 Dans le squelette des pÃ©titions, il faut afficher le moteur de recherche s'il vient d'y avoir une recherche, le nombre de signatures est faussement rÃ©duit dans ce cas. Et en profiter pour faire du XHTML strict.
Revision: 13939 CompatibilitÃ© du filtre {{{form_hidden}}} avec les URL symboliques: il faut qu'il demande Ã  generer_url_entite de lui fabriquer le contexte comme pour l'assemblage de la page.  La modif de urls/page.php n'Ã©tait finalement pas indispensable, mais Ã©viter de resynthÃ¨tiser les 3 RegExp Ã  chaque appel ne fait pas de mal.
Revision: 13938 le pipeline "styliser" n'Ã©tait pas dÃ©clarÃ© dans la stable !
Revision: 13936 permettre que le titre d'un document ait une extension differente de celle du fichier d'origine pour que le telechargement se fasse sous un nom&type different de celui sous lequel le fichier est heberge sur le serveur (ex envoyer en .php un fichier stocke en .txt pour raison de securite).
Revision: 13931 etre un peu plus strict dans la verification du titre du document avant de s'en servir comme nom de fichier : - il faut qu'il ait la bonne extension - il faut qu'il ressemble a un nom de fichier (en particulier compose de caracteres licites) ( [13933] aussi) 
Revision: 13930 retablir un content-type indument supprime par [13924]
Revision: 13928 double echappement provoquait la mort definitive des sites suspendus : ils devenaient {{{'su}}} au lieu de {{{sus}}}
Revision: 13927 Ce n'est pas parce que certains systÃ¨mes d'exploitation que je ne nommerai pas pataugent avec certains noms de fichiers qu'il faut considÃ©rer [11243] comme une {{fausse bonne idÃ©e}} comme le dit [13760]. Je filtre le cas du titre de document n'ayant pas d'extension qui ne doit en effet pas Ãªtre utilisÃ© comme nom de fichier du {{{Content-Disposition}}} (et encore, {{{Makefile}}}Â est notoirement recevable), mais autrement je restaure le comportement d'avant qui est une fausse {{fausse bonne idÃ©e}}}, autrement dit une vraie bonnÃ© idÃ©e. Par contrecoup, report du renforcement de sÃ©curitÃ© su secret du site [13866] dans la branche 2.0.
Revision: 13924 seuls les types de document qui ne peuvent etre inclus doivent etre envoyes en "Content-Disposition : attachment". Les clip flash et autre types embed n'etais pas visualisable lorsque la protection des documents etait activee
Revision: 13912 #1744 memoriser le bouton sumblit clique ou le x/y du bouton image clique quand on post un formulaire en ajax pour pouvoir les poster si jamais on resubmit en post classique suite a une demande du serveur refuser_traiter_formulaire_ajax()
Revision: 13911 enlever la securite dans le message_ok au retour des formulaires, car sinon il n'est pas possible de faire la redirection apres un post ajax dans l'espace prive
Revision: 13909 permettre au filtre |match de retourner la valeur 0 (zero) si elle est explicitement recherchee
Revision: 13908 #1732 : bug a la verification lors de la creation d'un auteur ( plus [13910]) 
Revision: 13905 #1687 : ne pas perturber le filtre unique avec #INTRODUCTION
Revision: 13901 corriger la recuperation d'arguments passes en url et le faux appel de syndic.html
Revision: 13898 Oups. Faux dÃ©part de AS U ! (mea culpa) 
Revision: 13897 Les URLs ne se recalculaient pas dans un cas prÃ©cis : changement de la casse sur une table insensible Ã  la casse. Pour Ã©viter cela, on rÃ©Ã©crit aussi, en plus de la date de mise Ã  jour de l'url son titre. Si la casse change, il sera ainsi pris en compte. Correction aussi d'un bug U.type inexistant sur les url arborescentes...
Revision: 13893 [12134] avait casse la relance des signatures en recalculant un hash au lieu de renvoyer l'existant
Revision: 13892 amelioration de la strategie de purge : - si le cache est trop gros on redemande la main - mais si il n'y a plus assez de vieux fichiers a purger, on la rend Ainsi, meme avec un reglage trop bas du quota, le cache se stabilisera autour du volume necessaire pour stocker une heure de traffic 
Revision: 13889 ne pas laisser le cache deborder lorsque les robots (ou les internautes) sont tres actifs - inc/invalideur renvoie le ratio taille cache/quota - le genie redemande la main lorsque le ratio est trop grand, sans attendre le prochain coup - les operations de vidange sont logees dans invalideur.log avec les details permettant de suivre les operations 

2.0.6 -> 2.0.7 (13 avril 2009)

Revision: 13887 Le datage des urls reecrites echouait pour cause de requette eronnee. Le suspens continue : y aura-t-il une version stable 2.0.x avec des urls reecrites non bugguees ?
Revision: 13882 patch de vincent ramos pour #1703 + report des trucs modernes de inc/rechercher dans la branche 2.0
Revision: 13881 pas de . en dehors de celui separant l'extension, sinon il est possible d'injecter du php dans un toto.php.txt, qu'apache peut vouloir traiter comme un .php normal (attaque dite 'de vlad' )
Revision: 13880 session_set() lorsqu'on renseigne son email (suite de [13878])
Revision: 13879 report [13878] afficher l'email de l'auteur connecte si on le connait (session)
Revision: 13877 report et nettoyage de ecrire_fichier_securise()
Revision: 13876 report de ecrire_fichier_securise [13867] pour mieux masquer le contenu de tmp/meta_cache.txt(.php) en cas d'ouverture inopinee de tmp/ aux regards curieux
Revision: 13873 retour de la pagination dans le controle des petitions (bug introduit en [13320])
Revision: 13872 Report de [13868] corrigeant l'alÃ©a ancien.
Revision: 13870 revert de [13846] qui casse le fonctionnement de la pagination AJAX
Revision: 13865 il faut securiser les appels Ã  propre et typo hors squelette (typiquement code php de l'espace privÃ©), mais dans les squelettes, la sÃ©curisation est intÃ©grÃ©e, et il ne faut pas en rajouter. On utilise donc la presence du parametre connect pour distinguer les appels des squelettes qui le comportent tous, des appels historiques hors squelettes qui ne le mentionnent jamais. Corrolairement, en cas d'appel hors squelette avec un parametre connect, il convient d'appeler en plus interdire_script
Revision: 13862 Nouvelle mÃ©thode pour l'authentification LDAP, qui devrait rÃ©soudre le bug dans certaines config d'Active Directory. GÃ©raud Tardif remarque qu'il est idiot de risquer des bugs avec des champs absents pour trouver le login, puisqu'on l'a dÃ©jÃ . Il vaut donc mieux se rabattre sur lui, mais on modifie les signatures des fonctions auxilaires pour qu'il soit facile de surcharger {{{auth_ldap}}} de sorte qu'on rÃ©clame des champs supplÃ©mentaires et qu'on en tienne compte.
Revision: 13859 Ignorer les lignes vides dans les CSV lorsque transformÃ©s en table HTML Ã  la volÃ©e (Cyril).
Revision: 13858 Ne pas utiliser intval quand on fabrique une requÃªte SQL, celui-ci ayant des grands entiers en standard, contrairement Ã  PHP (Camille). Vu son logo on aurait dÃ» se mÃ©fier: un PHP, Ã§a tronque Ã©normÃ©ment.
Revision: 13857 Les distributions RedHat, Fedora et CentOS ont maintenant une installation d'Apache par dÃ©faut qui font que le AllowOverride est Ã  None par dÃ©faut, avec comme consÃ©quence que les {{{deny from all}}}Â installÃ©s par SPIP ne sont plus effectifs sur ces distributions non modifiÃ©es. En consÃ©quence, report immÃ©diat dans la branche stable de [13608], qui n'Ã©crit plus dans tmp la valeur des aleas, qui sont des informations trop sensibles. A signaler Ã  propos des alÃ©as que l'alea_ancien n'est pas pris en compte pour les actions dont l'URL comporte ecrire/, il faut renoncer Ã  ces URLs. Enfin, il faudrait insister dans la doc sur le fait que tmp/ et config/ doivent Ãªtre interdits Ã  la lecture publique, idÃ©alement en les mettant Ã  l'extÃ©rieur du DocumentRoot.
Revision: 13856 Bug de puce 'meme-rubrique" des sites references
Revision: 13853 un flag manquant pour preciser que l'on est dans l'espace prive
Revision: 13852 pas d'exeÂ´cution en public non plus !
Revision: 13850 il est temps de suivre la prÃ©vision des oracles proteger l'espace privÃ©, donc...
Revision: 13848 eviter le die intempestif "spip_urls AS U insertion sans description" lors de la creation de nouvelles urls ... (bug introduit au detour de http://zone.spip.org/trac/spip/changeset/13838#file22)
Revision: 13846 indentation + meilleure verification sr onAjaxLoad(), pour compat crayons++
Revision: 13845 enieme correction des urls ... je vais peut-etre finir par y arriver
Revision: 13844 report oublie de [13765] qui reparait les urls arbo avec types renommes
Revision: 13843 permettre a la previsu de savoir ou elle se trouve (cf. http://www.spip-blog.net/forum-spip-org-comme-base-de.html )
Revision: 13841 log plus explicite
Revision: 13839 erreur sql sur date
Revision: 13838 NOW() disparait au profit de la date php (a verifier svp)
Revision: 13836 la date d'un article c'est celle du php, pas celle du SQL


2.0.5 -> 2.0.6 (16 mars 2009)

Revision: 13834 report http://trac.rezo.net/trac/spip/changeset/13833 ajout d'un index sur spip_documents_liens
Revision: 13830 passer l'id_auteur et l'id_article au squelette du forumlaire ecrire_auteur l'id etait calculÃ© mais pas passÃ©, on l'ajoute donc aussi
Revision: 13828 report de http://trac.rezo.net/trac/spip/changeset/13827 redirections anciennes urls
Revision: 13826 report discret de exec=fond introduit dans http://trac.rezo.net/trac/spip/changeset/13800 afin de pouvoir utiliser un meme plugin en version stable et dev etant un ajout de fonctionnalitÃ©, cela ne devrait pas poser de problÃ¨me...
Revision: 13824 report de http://trac.rezo.net/trac/spip/changeset/13822 et http://trac.rezo.net/trac/spip/changeset/13823 -- correction erreur 404 sur les urls de type spip.php  
Revision: 13820 donner une PRIMARY KEY quand il n'y a rien (VIEW MySQL)
Revision: 13818 toujours proteger les file_exists()
Revision: 13812 ajout discret du pipeline styliser pour le futur 2.0.6, afin que les plugins comme SPIP Clear puissent s'appuyer dessus sans surcharger le fichier.
Revision: 13809 coquille css (pi_r)
Revision: 13808 Report de http://trac.rezo.net/trac/spip/changeset/13807 -- ne pas empecher le changement de mode image/document sur les images de rubriques... 
Revision: 13801 manque de quotes (denisb)
Revision: 13798 un lien du type {{{ [->http://www.favicon.cc/?action=icon&file_id=29805] }}} doit se transformer proprement avec un {{{ &amp; }}}
Revision: 13797 Report de http://trac.rezo.net/trac/spip/changeset/10796 : #CHAPO doit enlever les redirections, mais pas  #CHAPO* qui doit les laisser.
Revision: 13795 report de http://trac.rezo.net/trac/spip/changeset/13794 : charger les autorisations au moment du traitement de #FORMULAIRE_EDITER_AUTEUR appellÃ© depuis le public
Revision: 13793 Le dÃ©but des vertÃ¨bres n'est pas la vertÃ¨bre nommÃ©e dÃ©but [http://archives.rezo.net/spip-dev.mbox/200902.mbox/raw/%3C49A3FF0F.8070102@yahoo.fr%3E/ YannX].
Revision: 13792 Ne pas tenter de rÃ©parer l'irrÃ©parable quand il faut prendre de la distance.
Revision: 13791 Fallait savoir que {{{$x[$y]}}} convertit la chaÃ®ne {{{$y}}}Â en nombre quand elle est interprÃ©table ainsi. PHP, le langage dont vous nous ne dÃ©couvrirez jamais tous les piÃ¨ges. Super argument publicitaire.

2.0.4 -> 2.0.5

- report de [13778] : l'installation sur les serveurs mysql avec un sql_mode par defaut etait cassee repare les installations sous easyphp 3.0 par defaut (13788)
- closedir(d); avant de l'effacer (13787)
- report de [13785] reparer la 404 des urls propres, et le mode urls propres_qs (13786)
- report de htaccess (robots.txt, favicon.ico, sitemap.xml), correction des urls selon rfc 1738. references : [13769] et de [13779] a [13783] (13784)
- noindex au lieu de none pour site.html (cf. [13773]) ( 13776 )


2.0.3 -> 2.0.4

- Remettre jQuery 1.2.6 pour ne pas crÃ©er de problÃ¨me de comptabilitÃ©. Ceux qui le souhaitent pourront mettre jQuery 1.3.2 dans leur rÃ©pertoire squelettes dans un fichier : Â« javascript/jquery.js Â» (13774)
- Enlever tous les arobases des sÃ©lecteurs jQuery pour autoriser jQuery 1.3.x(13772)
- report de [13755] et [13763] introduit les valuers date_default et date_redac_default dans le contexte quand SPIP ajoute la date d'office / accepter un tableau pour le filtre alterner (13770)
- report de [13621]Ajout de jQuery 1.3 ... Attention aux extensions qui utilisent encore [@param=value] dans les sÃ©lecteurs jQuery Ã  passer en [param=value] . (13768)
- Ajout de image_joindre (13766) 
- #1691 : une balise <a> etant absurde, il s'agit forcement du nom de la note (13761)
- #1711 : annuler [11243] qui etait une fausse bonne idee ; en l'absence d'extension dans le titre, les navigateurs sont perdus (13760)
- #1695 produire un aplat quand la production d'image echoue pour la css privee (13759)
- #1704 : reduire la taille de la vignette, y compris dans la colonne documents (13758)
- la fonctionnalite cachee dans la dist {article sans texte+un document joint} -> affichage du document inline provoquait le masquage de tous les documents joints lorsque le texte etait vide et plusieurs document joint. il faudrait au moins documenter le code pour eviter de reintroduire le bug (13757)
- jQuery 1.3.2 http://docs.jquery.com/Release:jQuery_1.3.2 (13756)
- ComplÃ©ment sur les urls arbo  (13753)
- les balises CVT #FORMULAIRE_TRUC implementees par la balise generique #FORMULAIRE_ n'utilisent que le squelette formulaires/truc.html Inutile et trompeur de chercher a la racine le squelettre truc.html, donc (13751)
- Bien tester tous les formulaires avant de les declarer inexistants * [13744] [13745] [13746] etaient incomplets on les fussionne (13749)
- Complement a [13745] et [13746] * le findpath manquait de precision (13746)
- report de [13744] #FORMULAIRE_INEXISTANT (13745)
- report de [13741] gestion plus fine des urls (13742)
- Amelioration traitement de l'arabe, notamment quand tiret a l'interieur d'un mot. (13739)
- On place le contenu du js du login dans un cdata pour Ãªtre valide ... On encapsule Ã©galement la fonction jquery en passant... (13734)
- report de [13732] bg d'affiche des sites syndiques dans l'espace prive (13733)
- report de [13728] urls page (13729)
- report de [13725] et [13726] (debug) (13727)
- complement a [13720] :  les fonctions url_xx($id,$entite) renvoient toujours une url valide donc commencant par ../ si on est dans ecrire/ (c'etait le cas auparavant pour les documents mais pas pour les autres entites) Corrolairement #URL_ARTICLE pointe toujours sur l'article, que le squelette soit evalue dans l'espace public ou prive, et [(#URL_ARTICLE|url_absolue)] est toujours correcte.  Ceci est vrai pour toutes les entites (13722)
- gerer les notes dans le suivi des forums  (13721)
- report de [13719] nouvelle API d'URLs (13720)
- ne pas surligner dans la page de recherche elle-meme (report de [13717]) (13718)
- integration des #NOTES dans les forums (13710)
- lorsque generer_url_entite doit generer une url publique depuis l'espace prive, il semble logique de prefixer de _DIR_RACINE pour que l'url soit valide repare le calcul des nouveautes et de [(#URL_ARTICLE|url_absolue)] evalue depuis le prive (13708)
- eviter les @include qui masquent les erreurs (13707)
- un <img > pas xhtml  (13706)
- report de [13689] #URL_ARTICLE et consort designent toujours l'url publique de l'objet depuis la racine, meme utilisee dans l'espace prive il faut donc les prefixer de #EVAL{_DIR_RACINE} dans le cas ou l'on affiche cette url dans l'espace prive pour que le lien soit correct (13705)
- report de [13696] ne pas coller les paragraphes en previsu des forums  (13701)
- Ã©viter d'avoir plusieurs id="nobot" sur la mÃªme page. Un div englobant le contenu du formulaire des signatures pour Ã©viter des erreurs de validation (13699)
- Le double clic du sÃ©lecteur d'auteur en Ajax ne fonctionnait pas. (13694)
- puce_statut surchargeable (permet en particulier le plugin mots techniques) (13693)
- fixer la taille des images pour que ca ne clignote pas (13692)
- ComplÃ©ment de 13677 sur la mise Ã  jour de la base lors d'un upgrade (13691)
- prise en compte de Accept-Language pour tout le monde (pas seulement les personnes authentifiÃ©es) (13690)
- Correction d'un bug sur la sauvegarde et la fusion (13661)
- Meilleure gestion en cas de plantage de l'installation (13659)
- Eviter un warning concernant les URL personnalisÃ©es (13654)
- correctif version allemande (klaus) (13636)
- la syntaxe recuperer_fond($fond,$contexte,array('ajax'=>true)) ne fonctionnait que si le fond etait defini dans le contexte (13615)
- Il y a des versions de PHP oÃ¹ les imagegif etc sont absentes, on contrÃ´le (13606)
- Il est totalement inutile de compliquer les choses avec des {doublons}... {!id_groupe} enlÃ¨ve dÃ©jÃ  le groupe en cours. (13604)
- GÃ©rer l'explicitation du nom des tables dans le critÃ¨re Fusion (13603)
- Respecter les 0 dans les urls propres (13602)
- Les restaurations de DUMP anciens avec une version 10000 utilisÃ©e ne commenÃ§aient pas les mises Ã  jour Ã  la version qu'il faut (13598)


2.0.2 -> 2.0.3

- pouvoir tenir compte du hreflang lors de la construction de l'URL par calculer_url via inc_lien_dist (13595)
- les entitee &gt; et &lt; etaint changee en < > apres une surligne (13593)
- Accepter les - dans le nom des bases SQL (13591)
- Bug sur changement d'auteur si le nom de l'auteur Ã©tait trop court  (13590)
- Coquille dans les vieilles defs (manque un g pour generer !) (Charly Caulet) (13586)
- Retour des recherches de mots associÃ©s aux documents (non utilisÃ©e dans le core)   (13584)
- Bug si erreur de frappe #URL_ MOT (espace avant MOT) (13582)
- Pour un raccourci "[->25]" la fonction nettoyer_raccourcis_typo renvoie "Array"... (Pat). (13573)
- Le numÃ©ro du jour manquait sur le libellÃ© du survol conduisant au calendrier du jour. Quant au libellÃ© du mois, il n'emmenait pas sur le calendrier du mois. (13569)
- Une fonctionnalitÃ© de la 1.9.2 perdue: si id_rubrique est fournie Ã  la crÃ©ation d'une traduction, il faut crÃ©er dans cette rubrique, pas ailleurs.  (13560)
- ne pas ecraser le hash de la boucle avec le critere {recherche} cela empeche tout plugin de l'utiliser (13555)
- proteger la fonction recuperer_fond quand on ecrit recuperer_fond($fond,$_GET) dans les plugins meme si il semble que la variable soit protegee en amont dans tous les cas (13551)
- Le cryptage du mot de passe avant envoi n'Ã©tait plus assurÃ© que si le cookie dession Ã©tait toujours actif.  (13544)
- Fatal error a la suppression d'un document avec vignette.  (13539)
- Lorsqu'on pose ou retire les .htaccess des sous-rÃ©pertoires de IMG, il ne faut pas oublier celui nommÃ© "distant"Â qui ne figure pas dans la table des types de documents. (13538)
- Deux balises A pour LOGO_DOCUMENT, c'est une de trop (Eric). (13536)


2.0.1 -> 2.0.2

- deux bugs au login (13529)
- refuser les urls avec le pseudo protocole data (13521) 
- bonne annÃ©e (13520) 
- Unifier la mise en page dans les 3 onglets de gestion des langues (13519)
- encore quelques retouches sur l'agenda de l'espace publique (13517) 
- le champ type de la balise A d'un logo de document Ã©tait toujours vide (13512)
- la boucle DOCUMENTS ne donnait pas les documents attachÃ©s aux messages de forums (13511)
- accepter les notes nommees <*> <+> <.> et autres caracteres significatifs (13510)
- un peeling pour Ã©vacuer le point noir. (13508)
- amÃ©lioration du calcul de popularitÃ© (13506)
- lien incorrect dans le message Ã  un visiteur venant de s'inscrire (13504)
- support du png8 comme format de image_format (l'extension sera bien 'png') (13501)
- authentification via LDAP/AD, lire le Samaccountname (13500)
- proteger l'$id fournit a calcul_branche_in (13498)


2.0.0 -> 2.0.1 rapport de police (13469 ->13495) 

- rÃ©paration d'un bug sur les urls standard et autres anciennes implÃ©mentations (13489) 
- problÃ¨me de crÃ©ation du rÃ©pertoire cache Ã  l'install (13487) 
- correction mineure sur le calcul des visites  (13485) 
- Compilateur : dÃ©faut sur la prise en compte sur le champ statut dans le cas d'une requÃªte sur une table principale (13484) 
- correction pour IE6/7 sur les formulaires de l'espace privÃ© (13481)
- il Ã©tait impossible de dÃ©placer SPIP dans un sous rÃ©pertoire (13478 )

