NOUVEAUTES
----------


Dans ce fichier nous allons essayer de noter les modifs
de spip depuis la version 1.3...

2002 janvier (arno)
Refonte des mots-cles.
Mots-cles sur les rubriques.
Les mots-cles appartiennent forcement a un groupe de mots.
Chaque groupe peut etre "lie" aux articles, et/ou breves, et/ou rubriques, et/ou sites syndiques.
De plus, on peut decider que certains groupes sont reserves aux admins et/ou aux redacteurs.
On peut egalement decider que certains groupes de mots sont accessibles a partir des forums publics,
et meme avec des icones. Utilisations derivees: "smileys" pour signer ses articles, notation des articles
notation des autres messages des forums...

2002 janvier (arno)
Previsualisation des messages des forums publics avant de poster.

2002 janvier-avril (arno, antoine, fil)
Mise en place du systeme de documents joints. Possibilité d'attacher
des vignettes éventuellement générées automatiquement (ou vignettes
par défaut en fonction du type de fichier). 

2002 fevrier (antoine)
Amelioration de la compatibilite avec les differentes installations de PHP :
les tags PHP passent en <?php (compatibilité avec l'option PHP "short_open_tags")

2002 mars (fil)
Quand on demande un article depuis une page recherche, coloration des mots 
de la recherche dans le texte de l'article.

2002/04/01 (fil)
La moderation des forums se decide desormais article par article,
avec une option par defaut (qui s'applique egalement aux forums de
rubrique, de breves, etc.. de maniere indiferenciee pour le coup).

2002/04/9 (fil)
ajout des tags #LOGO_RUBRIQUE_SURVOL et #LOGO_RUBRIQUE_NORMAL, utile
pour une maquette ou le logo de la rubrique courante est toujours affichee
en survol.

2002/04/12 (fil)
Gestion des filtres sur LOGO_xxx et sur FORMULAIRE_RECHERCHE, la syntaxe
[(#TOTO||filtre)] notamment assure que |filtre est un filtre.


2002/04/15 (antoine)
plusieurs spip dans une meme base mysql : configuration manuelle dans inc_version.php3,
tout au debut (mettre un prefixe different pour chaque installation).
*******************************************************************************
* - Il faut donc maintenant TOUJOURS utiliser spip_query() au lieu de
* mysql_query()
*
* - A part ca, la seule chose a laquelle il faut veiller, c'est de ne
* pas utiliser directement le nom des tables dans un WHERE, mais un alias
* (avec la syntaxe spip_table AS truc). Ca arrive uniquement quand on fait
* une requete avec plusieurs tables.
*
* Exemple, ne pas ecrire :
*
* SELECT spip_articles.* FROM spip_articles, spip_auteurs_articles
*        WHERE spip_articles.id_article = spip_auteurs_articles.id_article
*        AND spip_auteurs_articles.id_auteur = 1
* Mais :
* SELECT articles.* FROM spip_articles AS articles, spip_auteurs_articles AS lien
*       WHERE articles.id_article = lien.id_article AND lien.id_auteur = 1
*******************************************************************************


2002/04/19 (arno)
exportation de la base en plusieurs etapes si on atteint le timeout

2002/05/01 (arno)
Presentation des articles virtuels plus propre, dans l'espace prive. Dans le site
public, le #CHAPO des articles virtuels n'est plus affiche.

2002/05/07
- Nouveau pseudo-tag #LOGO_BREVE_RUBRIQUE (Gaetan Ryckeboer)

2002/05/
Nouvelle interface

2002/05/30 (fil)
possibilite d'entrer plusieurs mots-cles d'un seul coup dans les cases de formulaire,
separes par des virgules ou des points-virgule. A partir de 4 mots-cles associes a
un article, un bouton "retirer tous les mots" apparait.

2002/06/02 (fil)
Introduction d'une meta "email_webmaster" (lorsqu'on upgrade, spip prend l'email du
premier admin ayant un email, lorsqu'on installe/reinstalle il prend l'email indique
lors de l'installation). Ca permettra d'envoyer des mails "panique" si besoin, ou lors
des mises-a-jour, d'envoyer un mail indiquant ce qui a ete mis a jour, etc...

Ajout du nom/URL du site dans le mail envoye via FORMULAIRE_ECRIRE_AUTEUR : tiens, ca me
fait penser que ce tag n'a jamais ete documente...

2002/06/06 (arno)
Modification du comportement de #INTRODUCTION des articles:
- s'il y a un descriptif, c'est ce descriptif qui est directement utilise (tel quel, avec propre);
- s'il n'y a pas des descriptif, comportement habituel (resume chapo+texte).

2002/06/07 (fil & antoine)
Authentification par cookie de session. Lors de la mise a jour de spip, il est conseille
de verifier qu'on n'utilise pas la methode ".htaccess", afin de pouvoir en profiter. La
connexion est securisee au maximum de ce qu'on sait faire, avec un cryptage du mot de
passe en javascript (donc le mot ne transite pas en clair sur le reseau au moment de la
connexion), avec un cookie de session difficile a intercepter en javascript (trou de
securite classique), etc.
Grande nouveaute : le cookie d'authentification est accessible depuis l'espace public,
ce qui permet d'avoir un affichage personnalise (acces restreint, liens supplementaires,
blagues idiotes...)
Si on ne veut pas de cookies (ou si le navigateur ne les aime pas) on peut basculer sur
une authentification http a l'ancienne.

2002/07/15 (fil)
Stockage des preferences auteur (couleur, display, options) dans la base et plus dans des
cookies : ameliore la stabilite de l'environnement visuel pour utilisateurs nomades et
acces partages entre spipeurs.

2002/07/24 (fil)
Possibilite de passer certains sites syndiques en "moderation", de maniere a valider les
articles syndiques un par un. Evidemment, ca enleve beaucoup de charme a la syndication
de sites, censee faire vivre votre propre site en l'absence du webmaster ;)
Dans les listes, les sites sous modération sont indiqués en italiques ; sur la
page "à suivre" un lien "nnn liens syndiqués en attente de validation".

2002/07/25 (arno)
Penser a documenter les modifications de variables de presentation du type
$debut_intertitre...

2002/07/25 (arno)
Penser a documenter les nouvelles statistiques (modifier l'aide en ligne : elle n'evoque
meme pas les referers).

2002/07/27 (antoine)
Inclusion de squelettes a l'interieur d'un autre squelette. Pour inclure un squelette
machin.php3 en lui passant le numéro de rubrique, faire <INCLURE(machin.php3){id_rubrique}>

2002/08/01 (fil)
possibilite de specifier un spip_meta(charset) different du standard iso-8859-1.
Pas d'interface pour ça: il faut taper directement dans la base
	INSERT INTO spip_meta (nom,valeur) VALUES ('charset', 'windows-1251');

2002/08/03 (Jérôme Fenal)
Possibilité d'utilisation d'un proxy HTTP pour syndiquer les sites.

2002/08/03 (fil, Michael Parienti)
Quelques ajouts dans les raccourcis (cf. doc en ligne pour les details)

raccourci                           fonction
---------------------------------------------------------------
"- " (tiret espace)                 puce spip standard
"_ " (underscore espace)            <br> saut de ligne sans puce
-*   (listes hierarchiques)         <ul><li>... etc.
-#   (listes numériques)            <ol><li>... etc.

2002/08/05 (arno)
Inclusion directe de documents multimédia dans les articles: <embXX|left>
Auparavant, il faut fixer la largeur et la hauteur.
Possibilité de passer des paramètres: <embXX|center|autostart=true|quality=high>
De plus, nouveau raccourci #EMBED_DOCUMENT dans squelettes. Possibilité aussi de passer paramètres.

2002/08/07 (fil)
On ne cree plus les fichiers .htpasswd et .htpasswd-admin s'ils n'existent
pas deja (securite). Bien mentionner dans la doc comment proceder si on veut
les creer (pour que d'autres scripts puissent, eux, les utiliser).

2002/08/08 (fil, Christophe Roland)
Critère {branche}, équivalent à {id_rubrique IN (...)} où ... est la liste
de toutes les (sous-)sous-rubriques de la rubrique courante. [EXPERIMENTAL]

2002/08/09 (fil, arno) 
La recherche dans l'espace privé utilise désormais, en plus des "titres et
numéros", la recherche en texte intégral si elle est dispo.

2002/08/11 (fil, antoine)
Possibilité de copier/coller sans souci du texte appartenant à différents
charsets (russe, japonais...) avec un bon navigateur (Mozilla ou Chimera).
De manière [expérimentale], on peut aussi régler, juste après la création
de la base, le charset de référence des pages ecrire/.

2002/08/11 (arno, antoine)
Nouveau système de statistiques, décomposé en deux parties : visites 
(relativement léger) et referers (plus lourd). La connaissance des referes
permet de plus la mise à jour quotidienne d'un "pourcentage de popularité"
par article. Ainsi l'article le plus "populaire" est à 100%.

2002/08/15 (fil)
Authentification dans l'espace public, utilisé notamment pour les forums sur abonnement.
spip_pass.php3 est transformé en un vrai panneau de contrôle de son identifiant: il
reste en popup, mais contient désormais : 
- 1) possibilité de s'inscrire à l'espce privé (selon configuration de spip)
- 2) si 1) n'est pas dispo, mais que les forums par défaut sont en modération "sur abo" OU
	qu'il existe UN seul forum "sur abo", possibilté d'obtenir identifiants de forum
- 3) possibilité de modifier son mot de passe si on l'a oublié.

2002/08/17 (antoine, fil)
Aide au debogage des squelettes en cas d'erreur MySQL

2002/08/28 (fil)
Page de reparation de la base MySQL


------------------------ SORTIE DE LA 1.4 FINALE (2 septembre 2002)


Correction puce incompatible si pas preg_
Correction $GLOBALS['espace_logos'] = 0
Correction bug affichage debug squelettes
Ajout du raccourci [->site1]
Possibilité de mettre deux adresses dans un champ email (séparées par des ',')
Correction de #FORMULAIRE_ECRIRE_AUTEUR
Correction de getForm() qui appelait entites_html() sans inc_filtres
Compatibilité uniqid() php < 3.0.13
Compatibilité de {par num titre} avec MySQL 3.22
Correction d'un bug compatibilité MySQL 3.22 (?) sur le moteur de recherche
Correction d'un bug test formats images
Correction d'un bug sur les articles post-datés dans une rubrique vide
Correction d'un bug sur le #URL_SITE_SPIP.
Correction d'un bug sur les articles créés sans titre par erreur
Correction d'un bug sur les forums sur abonnement et dans la balise #LOGIN_PUBLIC
Allègement du code HTML dans l'espace privé
Envoi d'un en-tête Expires pour meilleure gestion des caches/proxies


* ATTENTION si vous utilisez la balise #URL_SITE_SPIP dans vos squelettes
* veuillez vérifier que le système n'affiche pas un / en trop désormais : si
* c'est le cas modifiez votre squelette à cet endroit-là.


------------------------ VERSION 1.4.1 (13 septembre 2002)


* Correction de bugs idiots introduits dans la 1.4.1 (fonction xxx pas définie)
* Retour au fonctionnement précédent de #URL_SITE_SPIP (il n'affiche pas le /
  final, ce qui permet de faire #URL_SITE_SPIP/IMG/toto.gif)
* Allégements du code HTML de l'espace privé
* Correction bug affichage sites refusés
* Les stats affichent 30 plus populaires + 10 récents au lieu de 20+20
* Possibilité de "modérer la syndication" dès la création du site syndiqué
* Correction bug #EMBED_DOCUMENT
* Correction bug sur la syndication (URLs contenant des ")
* Correction bug sur demande de mot de passe depuis #LOGIN_PRIVE
* Correction aide dans procédure d'install

------------------------- VERSION 1.4.2 (18 septembre 2002)

* correction bug creation rubriques
* Ajout d'un tag #PUCE
* Le raccourci [texte->>www.uzine.net/spip] crée un lien ouvrant dans une fenêtre (à consommer avec modération)
* le raccourci [->http://lien_très_llong......long] voit son texte coupé à 35 caractères
* affichage des "visiteurs" du site (participants aux forums sur abo, notamment)
* correction d'un bug de lecture des backend (la description d'un article pouvait passer comme description du site)
* calcul des referers plus solide, et toutes les 30 minutes au lieu d'une fois/jour
* possibilité d'avoir un mot de passe MySQL contenant des $

* Ajout du support LDAP :

Le support LDAP permet d'authentifier et importer automatiquement de nouveaux auteurs depuis un
annuaire extérieur. Le réglage est effectué à l'installation si l'extension LDAP est présente
dans PHP. L'authentification d'un nouvel auteur depuis LDAP entraîne ensuite la création d'une
nouvelle entrée dans la table auteurs. Les caractéristiques propres à SPIP (statut, préférences...)
continuent à être gérées dans cette table (l'annuaire n'est pas encombré d'infos supplémentaires). 
D'autre part, on peut continuer à ajouter des auteurs sous SPIP indépendamment de leur présence ou
non dans l'annuaire externe.

* Mise à jour obligatoire du fichier ecrire/inc_connect.php3 : soit votre site
vous prend par la main et explique qu'il faut supprimer ce fichier pour
réinstaller, soit il affiche subitement une page blanche (ce n'est pas le
cas en général, mais selon le moment où vous avez installé, ça peut
arriver)... tout revient à la normale dès que vous avez supprimé
inc_connect.php3 puis réinstallé la connexion à la base.

* Dans la boucle ARTICLES, une nouvelle balise #DATE_MODIF (au format date,
à utiliser, donc, avec des filtres comme |affdate) donne la date de
"dernière modification de l'article" : en fait, il s'agit, plus précisément,
de la dernière date à laquelle on a ouvert l'article en édition, MÊME SI ON
N'A PAS VALIDÉ NI MODIFIÉ L'ARTICLE. Ce n'est pas un bug ;-)

* Possibilité de mettre tous les squelettes dans un dossier (dont le nom est
défini de manière centralisée dans mes_fonctions.php3), ce qui permet
d'essayer plus facilement plusieurs jeux de squelettes...
* Boucle (GROUPES_MOTS) avec les #TYPE, #ID_GROUPE...
* Possibilité de mettre plusieurs #FORMULAIRE_ECRIRE_AUTEUR dans une même page

* Les mails "quoi de neuf" sont personnalisables via un squelette
  (nouveautes-dist.html)
* introduction d'un mécanisme de log (fichier data/spip.log)
  [via spip_log("message") et spip_debug("message")]

* passage de paramètres dans les filtres. La syntaxe est
  [(#BALISE|filtre{arg1, arg2}|...)]
Le filtre doit être défini de la manière suivante dans mes_fonctions.php3 :
function filtre($texte, $arg1='valeur par defaut1', $arg2='valeur par défaut 2')
{
    ....calculs....
    return (une chaine de caractères);
}

------------------------- VERSION 1.5a2 (26 octobre 2002)

* Réorganisation de la config du site (espace privé)

* Ajout d'une balise #EMAIL_WEBMASTER (configurable depuis ecrire/)

* Accessibilité : ajout d'une page /oo par défaut, gérée depuis le squelette
  oo-dist.html ; cette page en mode texte seul présente les 3 derniers
  articles et les 5 dernières brèves du site. Elle vise à faciliter la
  lecture du site aux utilisateurs de terminaux texte, braille, synthèse
  vocale, connexion lente, etc.
  (NB: si vous faites vos mises à jour via cvs, pensez à faire 'cvs update -d'
   pour récupérer le dossier oo/ )

* Ajout d'une balise #CHARSET, qui par défaut vaut iso-8859-1, mais peut se
  régler sur une autre valeur dans la configuration du site / options avancées.

* La possibilité d'ajouter des documents joints aux articles et/ou aux rubriques
  est désormais configurable. Par défaut articles=oui, rubriques=non (histoire
  d'alléger l'interface sur la grande majorité des sites).

* Les auteurs peuvent mettre eux-mêmes un logo sur leurs articles (tant
  que ceux-ci sont éditables, bien sûr).


------------------------- VERSION 1.5a3 (27 octobre 2002)

* La fonction d'affichage des articles récemment ouverts devient optionnelle,
  afin d'éviter les messages intempestifs.

* Nouveaux squelettes par défaut, à peu près conformes W3C, accessibles,
  plus jolis et plus propres que les anciens.

------------------------- VERSION 1.5a4 (???)

* Ajout de id_syndic_article dans le contexte et gestion dans la
  boucle(SYNDIC_ARTICLES) du critère {id_syndic_article} (bug signalé par
  zerrel et corrigé, vérfier la doc sur ce point)

* Nouveau tag #FORMULAIRE_ADMIN pour placer les boutons d'admin (recalculer, etc.)
  où on veut dans la page. Par défaut, si le tag n'est pas utilisé, les boutons
  restent affichés en bas de page comme auparavant.

------------------------- VERSION 1.5a5 (???)

* Amélioration graphique de l'affichage des auteurs, et des éléments
  d'interface spécifiques aux admins restreints (distinction des
  rubriques administrées, etc.)


------------------------- VERSION 1.5b1 (21 novembre 2002)

* Meilleure gestion en cas d'erreur d'écriture sur le disque : en
  particulier, on ne traine plus un skel_xxx vide qui plantait le site
  indefiniment.

* Divers nettoyages de l'espace privé (moins de raccourcis non nécessaires,
  correction bug sur la redirection et les forums, qu'un redacteur pouvait
  modifier meme apres publication, etc.)

* Le forum administrateur s'active en fonction du nb de rédacteurs

* Deux nouveaux mécanismes pour tenter de garantir la sécurité des sessions :
  1) "Se déconnecter" tue toutes les sessions du rédacteur présentes dans
     data/, ce qui permet éventuellement de déconnecter une session laissée
     ouverte dans un cybercafé.
  2) En cas de cookie de session présenté depuis le mauvais IP, celui qui conserve
     le "bon IP" rejoue le cookie aussitôt que possible, ce qui lui permet de
     déconnecter son voleur, si voleur il y avait ; s'il y avait juste changement
     d'IP, le cookie n'est pas rejoué (ie: le voleur ne peut pas déconnecter sa
     victime).

* correction d'un bug permettant à un rédacteur de supprimer des documents
  joints non attachés (ex: article ou rubrique).

------------------------- VERSION 1.5b2 (26 novembre 2002)

* corrections divers bugs mineurs + bug statistiques_referers du jour

------------------------- VERSION 1.5b3 (30 nov 2002)

* Nouveau tag #URL_LOGOUT, qui fait le pendant de #LOGIN_PUBLIC ; ce tag
  accepte un seul filtre, l'URL de destination post-logout (par défaut,
  il retombe sur index.php3)

------------------------- VERSION 1.5b4 (3 déc 2002)
(aucune modif, la 1.5b4 a l'air stable)
------------------------- VERSION 1.5PR1 (6 déc 2002)

------------------------- VERSION 1.5PR3 (13 déc 2002)

* Les administrateurs de rubrique ne pouvaient pas éditer les sites référencés
  dans les rubriques dont ils ont la charge.
* Mort du raccourci [->>] qui devient strict équivalent de [->]

------------------------- VERSION 1.5PR4 (13 déc 2002)

------------------------- SORTIE DE LA 1.5 FINALE (14 décembre 2002)

* possibilité de préciser un $cookie_prefix

* correction bug interdisant le déplacement d'un site d'une rubrique à une autre
* correction bug interdisant d'utiliser #TOTAL_BOUCLE sur une boucle de premier niveau.
* correction bug affichage visiteurs dans l'espace privé
* correction bug de syndication sur certains serveurs HTTP

* plus d'événements sont consignés dans ecrire/data/spip.log
* on évite de faire divers traitements lourds (calculs stats, envois
  nouveautes...) lors d'un meme hit

* ajout boucle documents joints dans le squelette rubrique-dist

* visualisation du message d'origine quand on répond à un forum de l'espace privé

* ajout balise #RECHERCHE

------------------------- VERSION 1.5.1(pr1) (4 janvier 2003)

* les appels MySQL se font en précisant à chaque fois le lien et le nom de
  la base, ce qui doit permettre d'appeler d'autres bases depuis les
  squelettes (option à régler dans inc_version)

* correction bug caractères spéciaux (tirets, tirets bas) dans login LDAP

------------------------- VERSION 1.5.1 (6 janvier 2003)

------------------------- VERSION 1.6alpha 1 (tests i18n)

* internationalisation de SPIP :
  - mécanisme de centralisation des chaînes de caractères
  - interface basique de sélection de la langue
  - réglage par site des langues proposées / de la langue par défaut

  //* Possibilité de répondre aux forums directement depuis l'interface de
  //controle_forums.php3 [SUPPRIME PAR LA SUITE]

* correction bug : on peut utiliser #POINTS pour les sites référencés

------------------------- VERSION 1.6alpha 2

* noms de langues natifs

* amélioration de la génération automatique de vignettes, avec, notamment,
  utilisation de fonctions de réduction de haute qualité si disponible

* dans le menu "ajouter un document depuis le répertoire upload", les noms
  de fichiers s'affichent par ordre alphabétique

* ajout diverses langues (espagnol, anglais, arabe)
* gestion des mails en charset utf-8

------------------------- VERSION 1.6 beta 1 (5 mars 2003)

* l'underscore est maintenant un caractère indexable dans le moteur de
  recherche (documentation informatique)

* langue allemande

------------------------- VERSION 1.6 beta 2

* support windows-1251 (charset cyrillique)

* ajout d'un moteur de translittération multi-charsets

* moteur de recherche fonctionne en translittération (donc indexe un mot en
  cyrillique sous sa forme translittérée en ascii, exemple : "teoreticheskaya")

* quand la langue du site est 'vi' (vietnamien), la translittération est plus
  complexe : les accents sont codés apr des chiffres, et la recherche peut se
  aussi bien à partir de mots tapés avec tous les accents qu'à partir de la
  translittération classique (a^.) ou spip (a65)...

* le moteur typo n'est activé que pour les langues française et espéranto

* possibilité de télécharger une version monolingue, pour chacune des langues
  complètes (aide en ligne + spip_xx.php3)

* Attention la mise à jour déclenche la réindexation complète du site (si le
  moteur de recherche est activé)

* support langues : espéranto, italien, vietnamien

------------------------- VERSION 1.6 beta 3,4,5 (on perd le compte)

* corrections divers bugs

* le critère {branche} est officiellement supporté ;-)

* modification du fonctionnement du $dossier_squelettes, pour le rendre plus
  souple et compatible avec <INCLURE> : désormais SPIP recherche, dans
  l'ordre, dossier_squelettes/fond=10.html, puis
  dossier_squelettes/fond-8.html (en remontant la hiérarchie des rubriques
  10, 8, etc. vers la racine), puis dossier_squelettes/fond.html, puis
  ./fond.html à la racine du site, puis ./fond-dist.html

  Pour les INCLURE(fichier.php3), SPIP regarde si le fichier
  dossier_squelette/fichier.php3 existe (et l'inclut le cas échéant) ; et
  sinon inclut ./fichier.php3 (sans nécessairement vérifier son existence).

------------------------- VERSION 1.6 beta 6

* suppression des forums attachés quand un site référencé est supprimé

* les fichiers "backend" contiennent désormais la date des articles syndiqués

------------------------- VERSION 1.6 beta 7

* Meilleure compatibilité de la syndication avec les différentes syntaxes
  de backends existants (RSS 2.0, dates de publication...)

* Reconnaissance universelle des jeux de caractères si l'extension iconv
  est installée : possibilité de syndiquer des sites utilisant n'importe
  quel jeu de caractères

* Moteur de recherche : on peut maintenant indexer les sigles de deux
  lettres et plus, y comprenant ceux contenant des chiffres (G8, CNT...)

* De nouveaux types de documents autorisés (Gaétan Ryckeboer)

------------------------- VERSION 1.6 beta 8

  // * Ajout d'un $dossier_cache configurable [SUPPRIME, un lien symbolique suffit]

* bug corrigé : dans les forums sur abonnement, ne pas accepter que l'auteur
  d'un post change de nom/email.

------------------------- VERSION 1.6pr1

* sous-répertoires éventuellement installés dans upload/ sont parcourus
  de manière récusrive.

* le fichier engines-list.ini est déplacé dans ecrire/ et renommé en
  engines-list.txt : si vous l'avez modifié, attention à reporter vos
  corrections dans le nouveau fichier : l'ancien sera supprimé.

* le fichier inc_meta_cache.php3 passe dans ecrire/data/ (permet d'assurer
  un fonctionnement normal de SPIP tout en verrouillant le répertoire ecrire/)

* Corrections et ajouts sur la gestion des dates :

  La balise #DATE_NOUVEAUTES permet d'afficher la date du dernier envoi du
  mail nouveautés.

  correction du bug des critères {age} et {age_relatif} ; ceux-ci permettent
  désormais de distinguer deux articles publiés le même jour (notion de
  "précédent" et de "suivant")

  introduction de {jour_relatif}, {mois_relatif} et {annee_relatif}, comme
  extension de l'{age_relatif}, mais arrondi au jour, au mois et à l'année
  (ce qui permet de faire désormais une boucle pour "tous les les articles
  du mois de mars 2003")

  nettoyage de la date passée dans l'URL : 2003, 2003/01, mais aussi, à partir
  de php3.0.12 (utilisation de strtotime), date=-1year, date=1march2003, etc.

  Au total, et en utilisant habilement les <INCLURE()>, je pense que toutes les
  manips sur les dates sont maintenant permises.

  tous les critères de date permettent maintenant de comparer des date_redac
  entre elles ou à la date passée en URL (ajouter _redac à la fin)

  #DATE peut s'utiliser hors des boucles (contexte ou URL)

* Accessibilité (espace privé) : ajout de raccourcis clavier dans l'espace privé,
  afin de faciliter la navigation pour les systèmes non-graphiques.
  Toutes ces touches sont gérées par le système d'exploitation : c'est-à-dire
  qu'il faut les utiliser, selon votre système, en combinaison avec "Alt", "Ctrl"
  ou "Pomme"... A vous de tester.

  Résumé des raccourcis :

  - Les touches 1, 2, ... 9, 0 déclenchent les différentes entrées des menus
    de navigation (les deux rangées d'icones en haut de l'écran). En raison
    du nombre limité de chiffres disponibles, seules les premières icones de la
    deuxième rangée sont accessibles par ce biais ;)
    (NB : si vous êtes sur un clavier azerty, n'oubliez pas d'utiliser en plus
    la touche shift, ou de passer par le pavé numérique)
  - La touche S saute directement à la colonne "de droite", qui présente le
    contenu utile de la page courante (utile avec les systèmes à synthèse vocale
    pour ne pas énumérer tous les choix de navigation de la colonne de gauche
    et des menus d'icones)
  - La touche R saute directement à la case recherche (note : n'oubliez pas
    que cette case est uniquement disponible en interface complète), ce qui
    vous permet de chercher rapidement un contenu (tapez Ctrl R, puis le texte
    à chercher, et appuyez sur la touche Entrée)
  - Les touches A, B, C ... permettent de sauter à chacun des "blocs d'affichage"
    présents sur la page (un "bloc" est par exemple une liste d'articles, un
    formulaire...). Le nombre de touches ainsi disponible dépend du nombre de
    "blocs".

* Correction du bug de vignettes non supprimées quand suppression document

* Ajout du patch/pétouille hébergement-discount

* Changement de stratégie sur les var_recherche=toto : ils ne sont plus
  ajoutés dans les URLs qu'au sein des boucles {recherche} (et pas dans
  toute la page), et il n'est plus nécessaire de les définir dans les
  inc-urls...  (si vous avez un inc-urls... personnalisé [autre que
  'standard' ou 'html'], il est conseillé de le réviser en supprimant la
  partie qui s'occupe de var_recherche).

------------------------- VERSION 1.6pr2

* propre() plus compliant (<br /> ; pas de <p>...</p> autour des <hr /> et
  des intertitres)

* Nouvelle variable de personnalisation $ligne_horizontale

* ATTENTION les intertitres changent par rapport à l'historique !!!

* Ajout de l'astucieux filtre 'sinon' : [(#TEXTE|sinon{pas de texte})]
  affiche le texte ; si celui-ci est vide, affiche "pas de texte".

* Nouveaux tags #LOGO_AUTEUR_NORMAL et #LOGO_AUTEUR_SURVOL (à généraliser?)

------------------------- VERSION 1.6pr3

* Bug : les pétitions avec email unique ne fonctionnaient pas

------------------------- VERSION 1.6 finale !!!  (27 mai 2003)


* Possibilité de surcharger la définition de la balise #INTRODUCTION, en
  définissant dans mes_fonctions.php3 une

  function introduction($type, $texte, $chapo, $descriptif) {
    ...
  }

* Ajout de la balise #DATE pour la boucle DOCUMENTS.

* Ajout de la fonctionnalité "extra" (plus ou moins documentée dans ecrire/inc_extra.php3)

* Les pages correspondant à un article non publié ne sont plus mises en cache

* Les mots de passe peuvent désormais contenir des accents (avec un jeu
  de caractères 8 bits de type iso-8859-1)

* gestion des langues par "module" ; personnalisation possible des chaines
  traduites via ecrire/lang/perso.php3 (plus ou moins documentée sur la liste
  spip-dev)

* message d'erreur au lieu d'une page blanche lorsque le serveur ne peut pas
  calculer la page et qu'elle n'est pas dans le cache (MySQL indisponible, sur
  le moteur de recherche, par exemple).

* mise a jour des rubriques publiees / dates des rubriques

* correction <code>(espace)(espace)xxxx</code> pour permettre ASCII-art

* prise en compte de l'entête IF-MODIFIED-SINCE (http1.1)

* compatibilité MySQL 4.1.0 (correction bug DEFAULT '0' auto_increment)

* url_glossaire_avec_des_%s

* support charsets arabes (windows-1256 et iso-8859-6)

* MULTILINGUISME version 1  (possibilité d'activer un menu de sélection
  de langue dans les rubriques et/ou dans les articles + mécanisme de gestion
  de ces langues dans les squelettes, à base de [(#LANG|lang_select)] et
  [(#LANG|lang_dselect)]... encore un peu trop compliqué.

   balise #LANG (fr, eo, en...)

   filtres de langue :
   - |lang_rtl devient 'rtl' si la langue est arabe, persan ou hébreu : à
   utiliser sous la forme <body[ dir="(#LANG|lang_rtl)"]>
   - |lang_select : sélectionner la langue (ce qui sera calculé par la suite
   sera dans cette langue)
   - |lang_dselect : revenir à la langue précédente

------------------------- VERSION 1.7a4 (28 juillet 2003)

------------------------- VERSION 1.7a5

* Ajout d'un système de traduction entre articles : on peut lier les
  traductions d'un article à la version originale

* Dans l'écran de login, on peut désormais choisir de rester identifié
  quelques jours, ce qui évite de retaper trop souvent son mot de passe.

* Une barre de raccourcis fait son apparition au-dessus des champs
  d'édition les plus importants (texte des articles, brèves, forums).

* Nouveaux tags multilingues : #LANG_DIR, #LANG_LEFT et #LANG_RIGHT (tous
  trois basés sur une fonction unique, lang_dir($lang, $droitier, $gaucher),
  qui affiche $gaucher si la langue courante est fa, ar ou he, et $droitier
  sinon.

* La page récapitulative des mots-clés dans l'espace privé devrait être
  beaucoup plus rapide à s'afficher.

* Correction d'un léger bug sur les forums publics : dans certains cas,
  la page n'était pas automatiquement recalculée lors de l'ajout d'un
  commentaire.

------------------------- VERSION 1.7a6 (4 septembre 2003)

* Notation <:code:> pour utiliser dans le squelettes des chaînes traduites
  dans le module 'local'. Application optionnelle de filtres
  (par exemple <:code|attribut_html:>);

* Rapidité accrue du calcul des pages du site public.

* Correction du bug des {doublons} avec la boucle hiérarchie.

* Distinction plus précise des erreurs MySQL dans les squelettes.

* On peut désormais configurer une adresse mail expéditrice des mails du
  site (si elle est laissée vide, l'émetteur = le destinataire, comme
  maintenant).

* UTF-8 devient le charset par défaut pour les nouvelles installations

* <code> et <cadre> sont écrits de gauche à droite

------------------------- VERSION 1.7a7

* Quand on entre un message sur un forum public, un cookie est posé afin
  de mémoriser le nom de l'auteur et son e-mail. Ces valeurs sont proposées
  par défaut pour les messages de forum suivants. Cela limite les messages
  « anonymes » dus à des contributeurs trop pressés ou trop paresseux.

* Lors d'une mise à jour de la base, SPIP teste d'abord si les droits
  d'accès à la base de données sont suffisants, et affiche un message
  d'erreur sinon.

* Un mécanisme de gestion de la charge (plutôt destiné aux hébergeurs, sauf
  contrib miraculeuse...) : lorsque SPIP détecte la présence, dans
  ecrire/data/, d'un fichier nommé saturation-mysql, et si ce fichier n'est
  pas trop vieux (10 minutes), il évite de faire des calculs pas absolument
  nécessaires : indexation ; calcul de pages déjà en cache et dont le cache
  aurait dû, normalement, expirer ; analyse des statistiques, calcul des
  popularités, analyse des referers...

* L'affichage des referers a été totalement revu.

------------------------- VERSION 1.7a8

* Ajout de champs #NOM_SITE et #URL_SITE pour les articles

------------------------- VERSION 1.7b1 (13 octobre 2003)

* Deux options supplémentaires pour mes_options.php3 : on peut décider
  que SPIP va ignorer les connexions par REMOTE_USER (.htaccess) et/ou par
  authentification http.

  Ca permet, en théorie, de fonctionner sous un .htaccess global (régler
  ignore_remote_user=true) ; ou de ne pas proposer l'authentification
  classique en cas de refus de cookie (cas, notamment, des serveurs mal réglés
  qui passent toutjours 'root' comme valeur pour php_auth_user)

------------------------- VERSION 1.7b2

* Les administrateurs restreints peuvent désormais modifier et valider les 
  sites des rubriques qu'ils administrent.

* Amélioration des champs extra : apparition de la syntaxe [(#EXTRA|isbn)]
  pour le champ "isbn" par exemple. Les champs extra sont indexés par le
  moteur de recherche.

------------------------- VERSION 1.7b3

* Une nouvelle page : l'état des traductions affiche les articles restant à
  traduire en fonction de la langue, ainsi qu'un bilan comparatif des 
  différentes langues du site.

* Une page de suivi à distance de la vie du site permet de récupérer l'adresse
  de syndication (RSS) et d'injecter les événements du site dans un calendrier
  (format iCal).

* Dans la configuration des langues, affichage informatif du contenu des
  fichiers de langue.

------------------------- VERSION 1.7b4 (10 décembre 2003)

* Lorqu'on crée une traduction d'un article, le texte de l'article original
  est automatiquement recopié afin de faciliter la traduction.
  
* Rajeunissement et amélioration de la navigation de l'aide en ligne.

------------------------- ????

******* on a un peu oublié de remplir ce fichier ****

-------------------------- VERSION 1.7 (5 janvier 2004)

* Le critère {tout} dans une boucle (RUBRIQUES) affiche les rubriques vides

* Un filtre pour les backend : |texte_backend remplace l'ancien empilement
  de filtres et corrige quelques bugs

* suppression des numéro-titres dans les réponses des forums
  (supprimer_numero automatique)

* surlignement compatible utf-8

* correction bug installation monolingue et version 1.7r

* possibilité d'appeler un squelette avec un paramètre lang=...
  <INCLURE(...){lang}> ou <INCLURE(...){lang=xx}> fonctionnent et sont capables
  d'aller éventuellement chercher un squelette affiné par langue (toto.xx.html)

* en interface complète la page ecrire/articles.php3?id_article=x permet une 
  "révision des insécables" en les affichant en grisé. (réglage à faire dans
  mes_options.php3)

* retour des boutons m> dans la liste des auteurs (ecrire/auteurs.php3)

* le filtre |exposer et la balise #ON_OFF (expérimental : à revoir)

* ajout des id_auteur dans les boucles (FORUMS)

* possibilité de critère {url==...} etc dans les boucles (SYNDIC_ARTICLES)

* amélioration de la pertinence du tri {par points} dans le moteur de recherche
  (en gros : les articles contenant les mots précis demandés, et tout
  particulièrement ceux qui en contiendront plusieurs, ont beaucoup plus de
  points)

* création de points d'entrée dans typo() et propre() pour des patches
  particuliers (expérimental)

* ajout de l'option $cookie_path (pour bidouiller spip avec des scripts
  externes comme Spikini)

/* case à cocher pour "prendre en compte les sauts de ligne simples" */

* Le suivi des traductions se fait par le "plan du site"

* amélioration du moteur de recherche pour les articles en allemand et en
  vietnamien :
   - en allemand on peut taper "flüß", "fluess" ou "flub" pour trouver
	  le premier de ces trois mots/ fluess en est la translittération
	  "complexe", et flub la translittération simple.
   - en vietnamien, ce sont les accents qui sont très riches : ainsi pour
      retrouver le mot "nguoi" avec tous ses accents, on peut le taper aussi
      bien avec les bons accents, sous la forme "nguoi" (sans accents, mais
      avec un risque de "bruit" élevé, sous la forme "ngu+"
      (translitteration habituelle des accents) ou encore "ngu7", les accents
      étant transcodés, en interne, avec la table "'`?~.^+(-" -> "123456789"

* indexation des pétitions et des forums. A noter, les forums sont indexés
  par thread, et non pas message par message.

* le filtre couper{} est plus smart, notamment pour des longueurs très courtes

* ajout de #URL_AUTEUR

/* fluidité de l'interface (changement de statut d'un article, titre "Nouvel
  article" qui s'efface)... ces modifs étaient demandées par Jasmine. */

* balise <poesie>

-------------------------- VERSION 1.7.1 (9 avril 2004)

* gestion améliorée des vignettes :
	- possibilité de les regénérer
	- utilisation de php-imagick ou directement de imagemagick en ligne de commande
	- organisation dans IMG/vignettes/ et IMG/cache-XxY/ des
 	  images générées (resp. vignettes et filtre |reduire_image
	- le filtre reduire_image accepte deux arguments {x,y}

* correction petit bug effacement de titre sur nouvel article

* [// gestion du multilinguisme côté visiteur (#FORMULAIRE_LANG et
  $multilang)]

* gestion du multilinguisme dans les champs textes (blocs multi)

* les blocs multi fonctionnent aussi dans les squelettes

* [//panneau de login multilingue (via #FORMULAIRE_LANG_ECRIRE)]

* correction bug (introduit dans la 1.7.1) : l'affichage des puces ne
  respectait plus les sauts de paragraphes

* correction du bug qui interdisait de modifier le descriptif d'un document,
  dans certains cas

* correction d'un bug dans les mélanges des formes <:chaine:> et <INCLURE()>

-------------------------- VERSION 1.7.2pr1 (29 avril 2004)

* incompatibilité <INCLURE()> et $multilang résolue

* ajout du critère {date} ou {date=...} ou {date==...}, qui ne marchait pas
  tout simplement parce qu'on ne l'avait pas prévu. Pour sortir un
  éphéméride, ou la phrase du jour, ou les articles de 1999 (?).

* résolution du bug referers de SPIP 1.7.1

-------------------------- VERSION 1.7.2pr2 (2 mai 2004)

* résolution de l'incompatibilité #EXPOSER avec INCLURE

* critères optionnels {lang?} {branche?}, {id_article?} etc.

* débuggage multilinguisme selon qu'on s'adapte au visiteur ou pas

* #FORMULAIRE_LANG et #FORMULAIRE_LANG_ECRIRE disparaissent au profit de
  #MENU_LANG et #MENU_LANG_ECRIRE (+ $forcer_lang)

-------------------------- VERSION 1.7.2pr3 (12 mai 2004)

* interdire la connexion des auteurs sans mot de passe (mais avec login)
* "prévision" des statistiques en fin de journée (basée sur la moyenne, pour
  les visites globales, et sur la popularité pour les visites d'article).

-------------------------- VERSION 1.7.2pr4 (14 mai 2004)

* notation {!lang_select} pour {lang_select=non}

-------------------------- VERSION 1.7.2 finale

* correction quelques bugs sites multilingues

* 1.8 alpha : nouvelle interface graphique pour l'espace privé

* suppression du répertoire NAVPICS (sous CVS faire "cvs update -P")

* retour de la création de vignettes lors de l'upload

* encore des réglages multilingues autour de $forcer_lang, qui
  a des implications, désormais :
  - sur la recherche du squelette (ne se base plus sur la langue de l'objet) ;
  - sur le critère {lang_select} par défaut dans les boucles articles etc
  - sur les URLs des pages (&lang=xx sauf langue par défaut)
  - sur le critère {lang} (qui marche même pour la langue par défaut)

-------------------------- VERSION 1.8a2

* intégration du nouveau compilateur

* les erreurs mysql sont logées dans ecrire/data/mysql.log (indépendamment
  de $mysql_debug)

-------------------------- VERSION 1.8a3

* débogage nouveau compilo

* suppression de la fonction spip_debug()

* la fonction calculer_rubriques() est plus rapide (reactivite de l'espace
  prive)

* version hongroise

* ajout de id_thread dans la table spip_forum, ce qui donne tout de suite
  le critère {id_thread} qui va bien pour retrouver le pied d'une discussion
  (squelette spip_forum)

* débogueur assez complet (même si on peut encore ajouter pas mal de choses)

* nettoyage du code des forums +  regroupé dans inc-forum.php3

* gestion d'un quota (5Mo) sur le cache ; les fichiers cache sont
compressés ; la page ecrire/admin_vider.php3 indique la taille du cache (du
moins des fichiers connus de SPIP)

* mode 'prévisualisation du site'

* correction du bug du forum spipBB

* débogage du ecrire_fichier(), notamment pour windows (à tester)

* invalidation des pages avec forum meme dès qu'elle ont un
  #PARAMETRES_FORUM

* la partie optionnelle AVANT d'une boucle accepte désormais d'autres
  boucles

-------------------------- VERSION 1.8b1 (fin aout 2004)

* révision du mode d'output-buffering et introduction de la
  fonction spip_ob_flush(); // supprimee par la suite

* le mode de création de #BALISE est normalisé et *toutes* les balises
  modifiables dans mes_fonctions.php3

* La boucle hierarchie est traitée de façon plus souple : on peut donc faire
{inverse}, {par hasard}, {n-2,1}, {par titre} etc.

* Nouveau critère {IN}
	<BOUCLE_aa(ARTICLES){id_article IN 1,4,2,3}> -> 1 4 2 dans cet ordre
	<BOUCLE_aa(ARTICLES){id_article IN 1,4,2,3}{inverse}> -> 2 4 1
	<BOUCLE_aa(ARTICLES){id_article IN 1,4,2,3}{par id_article}> -> 1 2 4
	(l'article 3 n'est pas publié)
	et même :
	<BOUCLE_aa(RUBRIQUES){titre in English documentation,
	Chinese Documentation}>#ID_RUBRIQUE </BOUCLE_aa>

* raccourci pour les [#ancres<-]

* traduction en Lëtzebuergesch (lb)
	-- et bientôt Magyar (hu), euskara, suomi, ... !

* la note s'affiche en popup sur l'appel de note (title="...")

* petite amélioration d'interface sur l'affectation des auteurs/mots à un article

* configuration depuis l'espace privé de la possibilité d'inscription de
  visiteurs

* backport lab : les documents insérés dans les articles sont dans des <div>
  avec des appels CSS ; les {{ }} génèrent <strong class="spip"> au lieu de
  <b class="spip">

* backport lab : UrlsPropres <http://lab.spip.net/spikini/UrlsPropres>
  doc à modifier : http://www.spip.net/fr_article765.html
  - petites différences avec le lab :
        * la variable de personnalisation est $type_urls et pas $urls
        * le fichier exemple .htaccess est donné en clair (il y a juste à le
           renommer en .htaccess)

* la boucle (HIERARCHIE){id_rubrique} n'affichait pas (enfin, si, mais
  c'était une erreur de la 1.8cvs) la rubrique appelante ; désormais, si
  le critère {tout} est présent, elle l'affiche, et s'il est absent elle
  ne l'affiche pas.

* Affichage des referers de la veille (pas rétroactif : il faut attendre une
  journée pour voir)

* L'aide en ligne n'est plus livree en standard, elle fonctionne
  en client/serveur, avec telechargement automtique depuis spip.net

* Syndication de fils au format RSS 1.0, RSS 2.0 et ATOM 0.3 (en plus de RSS
  0.91)

* les vignettes sont creees en png si le fichier source est en png

* le correcteur d'orthographe fonctionne avec le proxy si celui-ci est
  defini

* restriction de droits (rdacteurs et admins restreints)

-------------------------- VERSION 1.8b2 (1er octobre 2004)

